---
title: Прощайте, базы данных, да здравствуют векторные базы данных / Хабр
date: 2024-02-13
src_link: https://www.notion.so/b6b8e220be1a4199a74835d8c35f0692
src_date: '2024-02-13 21:07:00'
gold_link: https://habr.com/ru/articles/791930/
gold_link_hash: d819dc4043f35f0dabde808c1cefc2f7
tags:
- '#host_habr_com'
---

Революция в области искусственного интеллекта переформатирует все отрасли нашей жизни, с одной стороны обещая невероятные инновации, а с другой ー сталкивая нас с новыми вызовами. В безумном потоке изменений эффективная обработка данных становится приоритетом для приложений, на основе больших языковых моделей, генеративного ИИ и семантического поиска. В основе этих технологий лежат векторные представления (embeddings, дальше будем называть их Эмбеддинги), сложные представления данных, пронизанные критической семантической информацией. Эти вектора, созданные LLMs, охватывают множество атрибутов или характеристик, что делает управление ими сложной задачей. В области искусственного интеллекта и машинного обучения эти характеристики представляют различные измерения данных, необходимые для обнаружения закономерностей, взаимосвязей и базовых структур. Для удовлетворения уникальных требований к обработке этих вложений необходима специализированная база данных. Векторные базы данных специально созданы для обеспечения оптимизированного хранения и запросов векторов, сокращая разрыв между традиционными базами данных и самостоятельными векторными индексами, а также предоставляя ИИ-системам инструменты, необходимые для успешной работы в этой среде нагруженной данными.

### Погнали

#### Содержание

### Введение в векторные базы данных

Векторная база данных - это специализированный тип базы данных, который хранит данные в виде многомерных векторов, каждый из которых представляет определенные характеристики или качества. Эти векторы могут иметь различное количество измерений, в зависимости от сложности данных (в одном случае это может быть несколько измерений, а в другом ー тысячи). Для преобразования данных, включая текст, изображения, аудио и видео, в эти векторы используются различные методы, например, модели машинного обучения или извлечение признаков. Основное преимущество векторной базы данных заключается в ее способности эффективно и точно извлекать данные на основе близости или сходства векторов. Это позволяет выполнять поиски на основе семантической и контекстуальной значимости, а не только полагаться на точные совпадения или заранее определенные критерии, как в традиционных базах данных.

#### Эмбеддинги

Искусственный интеллект и машинное обучение произвели революцию в представлении неструктурированных данных с использованием эмбеддингов. Это массивы чисел, которые содержат семантическое значение объектов данных. Например, цвета в системе RGB представлены числами, указывающими их красную, зеленую и синюю составляющие. Однако представление более сложных данных, таких как слова или текст, в значимые числовые последовательности является сложной задачей. Именно здесь вступают в игру модели машинного обучения. Модели машинного обучения могут представлять смысл слов в виде векторов, изучая отношения между словами в векторном пространстве. Эти модели часто называют моделями эмбеддингов или векторизаторами.

![](https://habrastorage.org/getpro/habr/upload_files/e27/f70/6a0/e27f706a07f4650ae521f7e6e89d9cf4.jpeg "Источник изображения: A Gentle Introduction to Vector Databases | Weaviate — vector database")

Источник изображения: A Gentle Introduction to Vector Databases | Weaviate — vector database

Эмбеддинги кодируют семантическое значение объектов относительно друг друга. Похожие объекты группируются близко в векторном пространстве, что означает, что чем ближе два объекта, тем больше они похожи. Например, рассмотрим векторы слов. В этом случае слова, такие как "Волк" и "Собака", находятся близко друг к другу, потому что собаки являются потомками волков. "Кошка" также похожа, потому что она имеет сходство с "Собакой", поскольку обе являются животными и распространенными домашними питомцами. С другой стороны, слова, представляющие фрукты, такие как "Яблоко" и "Банан", находятся дальше от терминов, относящихся к животным, формируя отдельный кластер в векторном пространстве.

#### Векторный поиск

Эмбеддинги позволяют нам выполнять векторный поиск, поиск по сходству или семантический поиск, находя и извлекая схожие объекты в векторной базе данных. Эти процессы включают в себя поиск объектов, находящихся близко друг к другу в векторном пространстве. Точно так же, как мы можем найти схожие векторы для определенного объекта (например, собаки), мы также можем найти схожие векторы для поискового запроса. Например, чтобы найти слова, похожие на слово "Котенок", мы генерируем векторное вложение для "Котенка" и извлекаем все элементы, близкие к вектору запроса, такие как слово "Кошка".

Числовое представление объектов данных дает нам возможность применять математические операции, такие как расчет расстояния между двумя векторными вложениями, для определения их сходства. Это делает векторные вложения мощным инструментом для поиска и сравнения объектов данных на основе их семантического значения.

#### Метод ближайших соседей (ANN)

Индексация векторов упрощает извлечение данных путем эффективной организации векторных вложений. Она использует метод ближайших соседей (ANN) для предварительного расчета расстояний между векторными вложениями, кластеризации схожих векторов и их хранения вблизи друг от друга. Хотя этот подход жертвует некоторой точностью ради скорости, он позволяет более быстро извлекать приблизительные результаты. Например, в векторной базе данных можно предварительно рассчитать кластеры, такие как "животные" и "фрукты". При запросе базы данных на "Котенка" поиск начинается с ближайших животных, избегая расчетов расстояний между фруктами и объектами, не относящимися к животным. Алгоритм ANN начинает поиск в соответствующем регионе, таком как четырехногие животные, поддерживая близость к соответствующим результатам благодаря предварительно организованному сходству.

#### Векторная база данных против реляционной базы данных

Основное различие между традиционными реляционными базами данных и современными векторными базами данных заключается в их оптимизации для различных типов данных. Реляционные базы данных отлично справляются с обработкой структурированных данных, хранящихся в столбцах, полагаясь на совпадения ключевых слов для поиска. В отличие от этого, векторные базы данных хорошо подходят для структурированных и неструктурированных данных, включая текст, изображения и аудио, а также их эмдеддингов, что обеспечивает эффективный семантический поиск. Многие векторные базы данных хранят векторные вложения вместе с оригинальными данными, обеспечивая гибкость выполнения как векторных, так и традиционных поисков по ключевым словам.

Например, при поиске вопросов "Jeopardy", связанных с животными, традиционная база данных требует сложного запроса с указанием конкретных названий животных, тогда как векторная база данных упрощает поиск, позволяя запросить общее понятие "животные".

![](https://habrastorage.org/getpro/habr/upload_files/d0a/750/e9a/d0a750e9a0619b8d021e3a3de195f227.jpeg)### Принцип работы векторных баз данных

![](https://habrastorage.org/getpro/habr/upload_files/535/3b4/3a7/5353b43a72abb4e96c316fe38c4afcfb.png "Источник изображения:  What is a Vector Database & How Does it Work? Use Cases + Examples | Pinecone")

Источник изображения:  What is a Vector Database & How Does it Work? Use Cases + Examples | Pinecone

В контексте приложения, такого как ChatGPT, которое работает с обширными данными, процесс включает следующее:

1. Пользователь вводит запрос в приложение.
2. Содержимое, которое должно быть проиндексировано, преобразуется в векторные вложения с использованием модели Эмбеддинга.
3. Эмбединг, вместе с ссылкой на исходное содержимое, сохраняется в векторной базе данных.
4. Когда приложение отправляет запрос, модель эмбеддинга генерирует вектор для запроса. Эти вектора запроса используются для поиска в базе данных похожих эмбедингов. В традиционных базах данных запросы обычно требуют точных совпадений, в то время как векторные базы данных используют метрики сходства для поиска наиболее похожего вектора на запрос.

Векторные базы данных используют комбинацию алгоритмов для поиска ближайших соседей (ANN). Эти алгоритмы, организованные в конвейер, оптимизируют скорость поиска с помощью методов, таких как хеширование, квантование и методы, основанные на графах. Балансировка точности и скорости является ключевым аспектом при использовании векторных баз данных, которые предоставляют приближенные результаты.

![](https://habrastorage.org/getpro/habr/upload_files/cd7/9fd/53d/cd79fd53d6451b0692a4d215ad301a5e.jpeg "Источник изображения: What is a Vector Database & How Does it Work? Use Cases + Examples | Pinecone")

Источник изображения: What is a Vector Database & How Does it Work? Use Cases + Examples | Pinecone

Запрос в векторной базе данных включает три основных этапа:

1. Индексация: Векторные вложения отображаются на структуры данных с использованием различных алгоритмов внутри векторной базы данных, тем самым улучшая скорость поиска.
2. Запрос: База данных сравнивает запрашиваемый вектор с проиндексированными векторами, используя метрику сходства для определения ближайшего соседа.
3. Постобработка: Векторная база данных выполняет постобработку ближайшего соседа для генерации окончательного выходного запроса, например, сортировку ближайших соседей для будущего использования.

### Важность векторных баз данных

Векторные базы данных играют ключевую роль в индексации векторов, созданных с помощью эмбеддингов. Они позволяют осуществлять поиск похожих ресурсов с помощью соседних векторов. Разработчики используют эти базы данных для создания уникального пользовательского опыта, включая поиск изображений на основе снимков, сделанных пользователями. Автоматизация извлечения метаданных из контента, вместе с гибридным поисковым запросом на основе ключевых слов и векторов, дополнительно повышает возможности поиска. Векторные базы данных также служат внешними базами знаний для генеративных моделей искусственного интеллекта, таких как ChatGPT. Они обеспечивают надежную информацию и стабильное взаимодействие с пользователем, особенно в уменьшении проблем, таких как галлюцинации.

### Топ-7 векторных баз данных

Ландшафт векторных баз данных динамичен и быстро развивается, с многочисленными крупными игроками, стимулирующими инновации. Каждая база данных представляет собой уникальные функции и возможности, удовлетворяя различные требования и приложения в области машинного обучения и искусственного интеллекта.

![](https://habrastorage.org/getpro/habr/upload_files/1f2/f64/37c/1f2f6437cb8d7de93d39fc975a3d98f7.jpeg "Источник изображения: The 5 Best Vector Databases | A List With Examples | DataCamp")

Источник изображения: The 5 Best Vector Databases | A List With Examples | DataCamp

#### Chroma - 1

![](https://habrastorage.org/getpro/habr/upload_files/b70/e7a/01d/b70e7a01d5e72b9937eab6aa294a59aa.jpeg "Источник изображения: 🏡 Home | Chroma (trychroma.com)")

Источник изображения: 🏡 Home | Chroma ([trychroma.com](http://trychroma.com))

Chroma - это открытая векторная база данных, разработанная для упрощения разработки приложений с использованием крупных языковых моделей (LLM), позволяя интегрировать знания, факты и навыки для этих моделей. Она предлагает такие функции, как управление текстовыми документами, преобразование текста в эмбеддинги и поиска.

Основные особенности:

* Chroma предоставляет широкий спектр функций, включая запросы, фильтрацию, оценку плотности и многое другое.
* Поддерживает LangChain (Python и JavaScript) и LlamaIndex.
* API, используемый в блокноте Python, масштабируется без проблем на производственный кластер.

#### Pinecone

![](https://habrastorage.org/getpro/habr/upload_files/8d0/4d7/d1d/8d04d7d1d01c12a6380d6f2bad7a6c13.png "Источник изображения: A Pinecone Alternative With Better Search Relevance and Lower Costs — Vectara")

Источник изображения: A Pinecone Alternative With Better Search Relevance and Lower Costs — Vectara

Pinecone - это управляемая платформа векторных баз данных, специально разработанная для работы с многомерными векторами. С помощью продвинутых функций индексации и поиска Pinecone позволяет инженерам и ученым создавать и развертывать масштабные приложения машинного обучения для эффективной обработки и анализа многомерных данных.

Основные особенности:

* Полностью управляемый сервис.
* Высокая масштабируемость для обработки больших наборов данных.
* Поддержка добавления данных в реальном времени для поддержания информации в актуальном состоянии.
* Возможности поиска с низкой задержкой.
* Интеграция с LangChain.

#### Milvus

![](https://habrastorage.org/getpro/habr/upload_files/fa8/62a/16c/fa862a16c88421db88edd4be8d771c93.png "Источник изображения: What is Milvus Vector Database? — Zilliz")

Источник изображения: What is Milvus Vector Database? — Zilliz

Milvus - это открытая векторная база данных с акцентом на поиске сходства эмбеддингов и применениях искусственного интеллекта. Она обеспечивает простой пользовательский опыт в различных средах развертывания. Распределенная архитектура Milvus 2.0 повышает эластичность и адаптивность, делая ее надежным выбором для ряда сценариев использования, включая поиск изображений, чат-ботов и даже поиск химических структур.

Основные особенности:

* Способена искать триллионы векторных наборов данных за миллисекунды.
* Предлагает простое управление неструктурированными данными.
* Масштабируема и адаптируется к различным нагрузкам.
* Поддерживает гибкие возможности поиска.
* Включает объединенную структуру Лямбда для безупречной производительности.

#### Weaviate

![](https://habrastorage.org/getpro/habr/upload_files/209/e3a/724/209e3a72476145ef09df66ae1119db6a.jpeg "Источник изображения: Learning to Retrieve Passages without Supervision | Weaviate")

Источник изображения: Learning to Retrieve Passages without Supervision | Weaviate

Weaviate - это открытая векторная база данных, которая позволяет хранить объекты данных и эмбеддинги из различных моделей машинного обучения. Она может масштабироваться без проблем для вмещения миллиардов объектов данных. 

Основные особенности:

* Weaviate может быстро извлекать десять ближайших соседей из миллионов объектов всего за миллисекунды.
* Пользователи могут импортировать или загружать свои векторизованные данные, а также интегрироваться с платформами, такими как OpenAI, HuggingFace и другими.
* Weaviate подходит как для прототипов, так и для продакшена, обеспечивая масштабируемость, репликацию и безопасность.
* Weaviate предлагает функции рекомендаций, суммирования и интеграции с нейронными поисковыми фреймворками.

#### Qdrant

![](https://habrastorage.org/getpro/habr/upload_files/281/92f/4cd/28192f4cd8773f9e12c8ecc50068022f.png "Источник изображения: qdrant/qdrant: Qdrant")

Источник изображения: qdrant/qdrant: Qdrant

Qdrant - это универсальная векторная база данных и сервис API, предназначенный для проведения поиска сходства векторов высокой размерности. Он преобразует эмбеддинги и кодировщики нейронных сетей в комплексные приложения, подходящие для сопостасравнения, поиска и рекомендаций. 

Основные особенности:

* Предоставляет спецификации OpenAPI v3 и предварительно построенные клиенты для нескольких языков программирования.
* Использует собственный алгоритм HNSW для быстрого и точного поиска векторов.
* Позволяет фильтровать результаты на основе связанных векторных данных.
* Поддерживает различные типы данных, включая сопоставление строк, числовые диапазоны и географические местоположения.
* Разработан для облачных сред с возможностями горизонтального масштабирования.

#### Elasticsearch

![](https://habrastorage.org/getpro/habr/upload_files/22a/79c/c28/22a79cc28f7e6ffe9a40ef8d4a213abe.jpeg "Источник изображения: Learn more about Elasticsearch — ITZone")

Источник изображения: Learn more about Elasticsearch — ITZone

Elasticsearch - это механизм аналитики с открытым исходным кодом, который предлагает разносторонние возможности обработки данных, включая текстовые, числовые, географические, структурированные и неструктурированные данные. Он является ключевым компонентом Elastic Stack, набора открытых инструментов для обработки, хранения, анализа и визуализации данных. Elasticsearch превосходно работает в различных сценариях использования, обеспечивая централизованное хранение данных, мгновенный поиск, точную релевантность и масштабируемую аналитику. 

Основные особенности:

* Поддерживает конфигурации кластеров и обеспечивает высокую доступность.
* Предлагает автоматическое восстановление узлов и распределение данных.
* Масштабируется горизонтально для работы с большими нагрузками.
* Поиск ошибок для поддержания доступности кластеров и данных.
* Разработан для «вечного спокойствия»: распределенная архитектура, обеспечивающей надежность.

#### Faiss

![](https://habrastorage.org/getpro/habr/upload_files/cb9/77b/8af/cb977b8af969549dcc56d7097c7d8c02.jpeg "Источник изображения: Faiss: A library for efficient similarity search — Engineering at Meta (fb.com)")

Источник изображения: Faiss: A library for efficient similarity search — Engineering at Meta (fb.com)

Источник изображения: Faiss: A library for efficient similarity search — Engineering at Meta (fb.com)

Faiss, разработанный Facebook AI Research, - это библиотека с открытым исходным кодом, предназначенная для быстрого и эффективного поиска похожести и группировки плотных векторов. Он поддерживает поиск наборов векторов различного размера, включая те, которые могут не поместиться в оперативной памяти, что делает его универсальным для больших наборов данных.

Основные особенности:

* Помимо возвращения ближайшего соседа, Faiss также возвращает второго, третьего и k-го ближайшего соседа.
* Позволяет одновременно искать несколько векторов (пакетная обработка).
* Использует поиск с максимальным скалярным произведением вместо минимального евклидова поиска.
* Поддерживает различные метрики расстояния, включая L1, Linf и другие.

### Применение векторных баз данных

Векторные базы данных оказывают значительное воздействие на различные отрасли. Частым применением векторных баз данных является поиск подобного.

#### В ритейле

Векторные базы данных в розничной торговле, обеспечивают продвинутые системы рекомендаций, которые выдают персонализированные предложения на основе атрибутов продуктов и предпочтений пользователей.

#### Обработка естественного языка (NLP)

Векторные базы данных улучшают приложения NLP, позволяя чат-ботам и виртуальным помощникам лучше понимать и отвечать на человеческий язык, улучшая взаимодействие между клиентами и агентами.

#### Анализ финансовых данных

В финансовой сфере векторные базы данных анализируют сложные данные, чтобы помочь аналитикам обнаруживать закономерности, принимать обоснованные инвестиционные решения и прогнозировать движение рынка.

#### Обнаружение аномалий

Векторные базы данных отлично подходят для обнаружения выбросов, особенно в секторах финансов, что делает процесс обнаружения аномалий быстрее и точнее, тем самым предотвращая мошенничество и нарушения безопасности.

#### Здравоохранение

Векторные базы данных персонализируют медицинское лечение, анализируя геномные последовательности и соотнося решения с индивидуальной генетической структурой.

#### Анализ медиа-материалов

Векторные базы данных упрощают анализ изображений, помогая в задачах, таких как интерпретация медицинских сканов и видеонаблюдение для оптимизации потока трафика и обеспечения общественной безопасности.

В отдельной статье разобрали как экспериментировать с векторными базами данных, такими как Chromadb, Pinecone, Weaviate и Pgvector. Переходите по следующей ссылке: [Эксперименты с векторными базами данных: Chromadb, Pinecone, Weaviate и Pgvector | codemaker2016.medium.com](https://coinsbench.com/experimenting-with-vector-databases-chromadb-pinecone-weaviate-and-pgvector-0f35c0356540)

Спасибо за прочтение этой статьи. Благодарим Гаури М. Бхатт за рецензирование контента. 

Если вам понравилась эта статья, пожалуйста, нажмите на кнопку сердечка ♥ и поделитесь ею, чтобы помочь другим найти ее!

Статья также доступна на [Medium](https://codemaker2016.medium.com/goodbye-databases-its-time-to-embrace-vector-databases-0ffa7879980e).