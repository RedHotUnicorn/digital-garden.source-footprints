---
title: DAX by examples
date: 2022-04-05
src_link: https://www.notion.so/DAX-by-examples-f6a80ea3c66b4728b9c3ae737c846076
src_date: '2022-04-05 19:49:00'
gold_link: https://www.youtube.com/watch?v=f5IdCDF1fj4
gold_link_hash: 61b94281f09a5e9f8cf5e729293b144b
tags:
- '#host_www_youtube_com'
---

![](https://www.youtube.com/watch?v=f5IdCDF1fj4) 
# Description 
Learning DAX by examples is never a good idea! Watch why and get motivated in learning some theory first! Download sample file: https://www.sqlbi.com/tv/dax-by-examples/?aff=yt

How to learn DAX: https://www.sqlbi.com/guides/dax/?aff=yt
The definitive guide to DAX: https://www.sqlbi.com/books/the-definitive-guide-to-dax-2nd-edition/?aff=yt
# en
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1)~~  ciao friends and welcome to a new video from sql bi i'm alberto ferrari and i'm a business intelligence consultant and a dax trainer i spent most of my time teaching daxa to different students all around the world in this video i want to show you a beginner guide to dax through examples when you are a newbie in dax you search for examples on the web because you have the idea that by looking at a lot of examples you can increase your knowledge about dax and learn the details that are needed to solve your scenarios the thing is the kind of examples that you can understand at the beginning they are simple examples so there will be just uh one simple dax expression that contains one or two formulas that solve a specific problem and you might derive the wrong idea that learning dax means learning the details about all the functions in dax as if there always were a function to solve your specific problem the real world is quite different most of the times your specific scenario requires combining together different functions in complex tax code so that 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=83)~~  your unique question is actually answered in order to build this dax code you need to learn theory first and understand it well i want to show this with an example therefore what we will do in this video is not just showing it's not just looking at different functions and how they work that would be too simple and in some way misleading instead i want to build with you quite a complex dashboard that requires calculation for which we do not have any specific functioning tasks we will need to build the code and i will keep the theory to a minimum nonetheless let's start by looking together at the final result we want to obtain then we reason a bit on top of the entire video and then we start writing dax code we are going to work with the contoso model let's start by quickly looking at okay this is the data model we have contoso sells goods all around the world and the sales are stored in the sales table you can buy your goods in a store we have different stores all around the planet and we also sell online and of course sales happen to customers 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=164)~~  there are also other tables like date and products but we are not interested in those tables for now the most important thing are store and sales for now if you buy in an online store if you buy in a physical store then what happens is that you enter the store grab your goods pay for them and you're happy therefore the delivery of the good is the same as the order date they will happen at the same moment but if you buy in an online store then you place your order and it takes some time to deliver this good therefore we have in the sales table two dates which are the most relevant dates for this demo which are the order date and the delivery date this first order has been placed on the 22 of february but it was delivered on the 25th of february therefore it took three days to deliver the order and we want to do an analysis of how good we are in delivering orders in different countries all around the planet so the final dashboard that we are going to build is this one that shows the cumulative percentage of deliver orders by the number of delivery 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=239)~~  days let me show you the details about the dashboard okay we have on the columns the number of days required to deliver an order one day two days three days five days then we have the different countries where we ship our orders and here the number the first cell 16.53 means that 16.53 of the total number of orders has been shipped in one day only then we have two 39.67 this is a cumulative percentage meaning that this number 39.67 includes the orders shipped in one day and two days and the number always grows so here for seven that says that 95.59 of the orders in australia have been shipped in at most seven days then when we reach a hundred percent we know that all the orders have been shipped in at most 10 days dashboard also needs to color the cells you see that we have some cells that are colored in blue some others that are colored in red and the reason for this is because we compare each cell with the global percentage the blue cells are above the global percentage whereas the red cells are below 12.90 is below 14.95 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=337)~~  so we want to provide a visual color a visual information to the user that quickly shows whether in a specific country we are better or worse than the average finally talking about the dashboard you see that when we start when we reach a hundred percent we stop showing further values once we have reached a hundred percent for seven days in germany italy and the netherlands we do not show further values that makes it easier to focus on the numbers where they are relevant building the dashboards will require some work we will need to first compute the number of days which are required in order to deliver an order then we will need to slice and compute the percentage of orders delivered in different days and finally color the dashboard the right way there's a lot of work to do and as you might guess there are no dax functions that will help us with a single line of tax code we will need to write it together i will keep the theory to a minimum the minimum required in order to understand the code that we are writing with that said i will explain some 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=416)~~  theory because the basic theory of the row context the filter context and the calculate functions are required in order to understand what we are doing nonetheless nearly the end of the video i will show you that the code we wrote actually contains a small glitch and fixing that small glitch requires a lot more knowledge it's just a single line that needs to be changed but you need to know that and to know that you need theory so the goal of the video is to show you how to write complex tax code how to combine together simple functions how to understand the basic theory and hopefully that will raise your curiosity to learn more about daxa if that is the case well guess what we do have trainings we have the introducing dax training which is free and you can find it at sqlbi.com and if you want to go further you can learn with the mastering tax training that will actually transforms you into a guru nonetheless let's start by reasoning on top of the code that we need to write as we said we need to compute the number of days which are required to deliver an 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=494)~~  order and if we look at the orders table we have these two columns we have the order date and the delivery data the number of days which are required in order to deliver an order is just the difference between the delivery date and the order data index you can compute the difference between two days by just subtracting one day from the other so we can create a calculated column that subtracts from the delivery date the order date and that produces the number of days required to deliver the order so we can do that by simply creating in the sales table a new column we call it delivery days first the name of the column and then the expression we want to compute which is the delivery date minus the order date as i said the subtraction of two columns produces the number of days unfortunately the result is not really perfect you see that delivery days shows a data it's not a number and the reason is one date minus another date produces a data if we want to transform that into a number we need to cast it using the in function 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=579)~~  if i transform that into end of says delivery date minus says order date now this produces the number that i want to see three days four days one days two days and so on right now this is a column and a column can be used directly in a report in order to show its value its aggregate let's do that now that we have the delivery date we can go here in the country in the report that is slicing by customer country it says we have the delivery days i just drop it here and you see it shows delivery dates but the number looks wrong it's not actually wrong it's the sum of delivery days because by default the engine will aggregate a column in numeric column by using sum we are not interested in the sum we want maybe the average of delivery days because that makes a lot more sense you can do that through the user interface so i can go here under delivery dates and instead of showing the sum i can use the average so i just click on average and this will now show me the average of the delivery days now before moving further one important 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=658)~~  detail you see that we created a column that can contain two one four whatever number of days required but when we project the column in a matrix it always shows the aggregate value it does not show the value of the column it can be the sum by default it can be the average or whatever you might want but the value shown in the matrix are always aggregate values they are not the columns that you actually computed the columns that calculated columns are stored in the model and then used to build the aggregate let's focus a bit more about the details of the number this number 1.74 is a bit too small i know the model and i know that we are not that good we are not able to deliver in 1.70 days on average our orders the reason is as i said earlier we have physical stores and we have the online store and the difference that the delivery days makes sense only for the online store for physical stores this value will always be zero but right now if i just compute the average i average also all the orders with zero delivery days 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=739)~~  combining them together right now i'm slicing my customer country but in order to understand it better instead of using the customer country we can use the store country on the rows and you see that for all the countries it shows zero now this is the store country except for the online store where it shows 2.95 which is a much more meaningful number i want my measure to compute 2.95 i do not want 1.70 because 1.70 is just wrong so what i could do is add a filter to the report that shows only the sales for the online store the problem of adding the filter to the report is that you always need to remember to add the filter and if a user just places the measure or places the calculation in a report without remembering about the filter for online store the numbers will be wrong that is why the calculated column was a good option but it would be better if we build a calculation that automatically includes the filter so the user will just drag the measure in the report and the number will always be correct to do that we cannot just use a 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=819)~~  calculated column we need to write a measure a measure is an aggregation a calculation that works at the aggregate level it does not work row by row as calculated columns do and it is able to we will be able in the measure to add filters and modify the logic of the calculation so let's start writing the measure and we started by taking the code of delivery days which is here let me just copy the code and we build a new measure that already aggregates the average so we call it average delivery days now if i write the same expression that i was using before for the column you see that i have an or an error the error says i cannot find the name delivery data both for delivery date and for order date so i have two errors with just a simple expression what is the reason for that in order to understand it we need to introduce the concept of the row context so let me get rid of this measure for now and let me explain how a calculated column works when you write an expression like this says delivery date minus says order data 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=900)~~  in the in a calculated column what the engine does is it computes the column row by row so it starts on the first row it computes the value then it goes on the second row it computes the value and it stores those values in the table but the relevant point is that the calculation happens row by row technically we say that there is a row context the engine knows in which row it is while computing the values therefore if we look at the data here because our expression is using order date and delivery data the engine will start on the first row here it grabs the value of the order data the delivery data subtract one from the other computes the result and store it in other words the engine always knows in which row it is while computing the values that is the presence of a row context in a measure things are different a measure is not computed row by row a measure is computed at the aggregate level where there are a lot of rows that needs to be aggregated together therefore the expression says delivery date does not have a value the engine 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=985)~~  does not know which row to use to compute the value of the delivery date column in a measure you always need to use either aggregations or you need to introduce a row context by starting manually an iteration let me show you this so we have the code the measure those we have the column we can go back and write the measure now knowing that it will not work with just a simple code so again right click new measure as we said we cannot write sales delivery date minus sales order date because the engine does not know which row to use to provide the value for delivery date and order date but we can introduce a row context by starting an iteration so instead of just writing the difference this way we can do another of the expression over sales of the expression that we wrote earlier now average x introduces an iteration the engine because of average x will start scanning the sales table and compute the expression that we provide as the second argument of average x row by row therefore here we do have a row context so this expression is computed inside a raw 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1083)~~  context and now you see we no longer have any error i can hit enter format it as a decimal number with two decimal places place it here and you see that now my average delivery days computes the same value as the average delivery days so i just rewrote the code as a measure we still need to add the filtering part but while we are here because we created the average delivery days measure we actually no longer need the average of delivery days calculated column keep in mind that calculated columns are good and you can use them in your data model but they increase the size of the model every calculated column uses space in your model therefore even though for newbies it's good to use calculated columns when you learn more dax you also learn that using measures is a best practice so try to build all of your calculations with measures instead of using calculated column because that produces a smaller model and several times also a faster one so let's get rid of the calculated column that is here delivery days we just remove it from not rename but remove 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1167)~~  from the model okay and now we have our average delivery days as i said we still need to introduce the filtering now averagex introduced an iteration and it is iterating over sales let's go to our calculation it's iterating over sales so it's scanning the entire sales table we want to remove from the sales table the orders which are not happening online and information about where the order happened is in the store table there is a function that we can use here which is filter we filter sales and here i would like to write where store name but again i have a problem you see that it says that it cannot find the store it cannot find the name name even though in store we do have the name but it doesn't find it why that the reason is a filter is an iterator again it is creating a raw context over the sales table sales does not contain the store name the row context the iteration is happening on the sales table store is a different table and we do not have a row context there therefore if we want to access the store of the current sales we can not just 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1261)~~  write a store name we need to use the related function related starts from the current row context and lets you access columns in tables that have a relationship with the current row in the current row context it is enough to go here and say filter sales were related store name equals online store and now you see the problem goes away i can now hit enter and you see that the average delivery days appears only for the online store now right now i'm slicing by the store name remember that we were slicing by country by customer country so let's get rid of the store country and we placed instead the customer country on the rosa now this number average of delivery days is the correct value only considering the sales that happened online using filter is good and the filter is a function that filters and iterators they are functions that are very frequently used at the beginning but what we can do is compute the same value not using the row context and the related function but instead relying on the filter context let me explain first what the filter 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1346)~~  context is that is the second important topic about dax whenever you write a calculation the calculation always happens inside a filter this filter is created typically by power bi by the report by the client tool that you use to build your calculation let me show you that with the code here my measure average delivery days iterates over the sales table but you see that depending on what country i placed in the report i have different values 291 299 289 289. the reason why i have different values is because the calculation happens on different subsets of the data even though my code does not say that it's working on a subject of the data still the filter created by the report filters the entire calculation so when i write filter over sales this sales reference does not reference all the rows in sales but only the rows that are visible given the filter that the report has placed so for germany this will be the germany sales for italy they will be the italian sales for united kingdom that will be the sales in uk the filter context is a filter that is 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1429)~~  created by the report and it affects all the calculations now power bi through a matrix or through a report can create the filter context so the context under which your code is being computed but you also have the option of creating the filter context by yourself using the calculate function calculate lets you change the filter context by introducing new filters so instead of writing averagex over filter sales what i could do is get rid of this filter iterate over sales take this code and embed everything inside calculator what calculate will do it will create a filter context where only online sales are visible i just copy the code of the filter and one good thing about calculate is that you no longer need related because calculate works with the filter context not with the row context so i can just write store name equal online store and that's it now my average x iterates over sales but this is a reference to sales that happens in a filter context that contains a filter for online store therefore writing the code this way 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1517)~~  produces the very same number it is a better practice whenever you can use calculate it's quite always better to use calculate because filter removes rows from a table so it needs to scan a table and get rid of rosa whereas calculate applies the filters first it's not actually correct i mean the optimizer does a great job in making both filter and calculate work at a decent speed but with that said whenever you can use calculate to write your code it is actually a bit better now we have our calculation that is showing a good number the average delivery case the thing is this number is still wrong it's not correct even though it's closer to the correct number it is not indeed the correct value why that well the reason is i'm iterating over sales so my calculation is averaging row by row over the sales table but the sales table does not contain one row per order it contains one row per order line a single order will have a lot of lines and my average is averaging individual lines let me show you this with the data if i go to the data view and i sort it 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1603)~~  by you see that the first order 269 500 contains several lines one two three four five lines and for five times i have the order date and the delivery date now x will iterate line by line and compute the difference between order date and deliver date for each individual line therefore an order with a lot of lines will have a much larger weight than an order with just one line because i'm averaging individual lines it would be way better if i were able to compute the average at the order level the thing is i cannot because my model does not contain data at the order granularity it contains data at the order line granularity what i can do is instead of iterating over sales iterate over another table that has the correct granularity that is the order i could create a table this way a physical table in the model at the order level only for the sake of this calculation or what i can do and it would be better is aggregate the values just before iterating over them so create a sort of temporary table that contains the order 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1692)~~  number and the columns that are needed to do my calculation we do have a function index that performs grouping and it is summarized summarize can scan a table and group it by a set of columns that you provide so i will not need to create a physical table instead i will just build a temporary table on the fly iterate on top of it and compute my instead of iterating over sales i will iterate over a grouped version of sales and i use i can summarize sales by sales order now summarize returns all the distinct values of the order number in the sales table but you see i still have a problem if i iterate over summary sales by order number i can no longer access to delivery date and order date why that again is the row context now that i'm iterating over a table that is grouped to contain only the order number i no longer have access to either the delivery date or the order date what i need to do is group by not only the order number but by order number delivery date and order date so that the resulting table contains three columns 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1787)~~  and i can do calculations on top of that therefore what i need to do is summarize by sales order number sales order date and sales delivery date if i summarize over the three columns now you see that intellisense does no longer provide an error because the table returned by summarize contains the order number the order date and the delivery date if i hit enter you see that the numbers below changed and now they have a different value now this technique grouping works as long as it is guaranteed that each order has only one order date and one delivery date if it happens for whatever reason that for the same order number i have different order dates or different delivery dates then my aggregation would be wrong and i would need to work a lot more we can check that we can look at the result of summarize and check whether there is only one row per order meaning that the combinations of order date delivery date and order number is unique so we can just take the code of summarize and create a calculated table let me copy this code 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1870)~~  we go here to look at the result and we create a new table it's just a temporary table for the sake of testing so test beside this is also a useful technique whenever you want to check results in a very quick way and you see that the result is a table that contains the order number the order date and the delivery date exactly what i was expecting but how many rows are there if we look at the number we have here we have rows so this is number of rows in the resulting table of summarize how many values do we have in the order number again we can check that by looking at sales just click on order number and we have 508 okay here it is ivan 5819 decent values this means that the result of summarize has the same number of rows as the number of orders we have in the model therefore our calculation is safe each order has only one order date and one delivery date now that we check that we can get rid of the test table that was useful only to compute that number now we have our calculation average delivery dates that computes the correct 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1981)~~  value therefore the first step is completed we are now able to compute the number of delivery days and slice it by country but you need to remember that that was not our origin our final goal let me show you again the final result what we want to compute is the number the percentage of orders delivered in one day two days three days and so on so we need to be able to slice by the number of days and then compute this percentage we can start working on this for example by looking at the distribution of orders of the number of orders slicing it by the number of delivery days so what i could do is create a new let me do that with on a new page instead of slicing by country i might want to slice by the number of delivery days and now i'm a bit in trouble because we deleted the column that contains the number of days to deliver an order the thing is if you want to compute some value some aggregated value then measures are good but if you want to slice or dice or filter by values then measures are not the best tool you cannot use a measure 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2068)~~  and place it on the rows or on the column of a pivot table you need a column to do that so we need to reintroduce our delivery days column that's not hard we just create a new column it was the library days which we know is the integer part of a now that we have it as a column i can remove the country place the number of delivery days on the rosa and now i have a delivery days and average delivery days which is not the number that i want what i want is the number of orders delivered in one day to compute the number of orders i can compute the distance count of the order number i cannot just use account rows of sales because that will compute the number of transactions i need to compute the distance count of the order number and we also need to remember that i always need to restrict the calculation to online sales so two sales that happen in the online store it will be a distinct kind of and i need to add the filter for the store so we add calculator this thing count well the store name and now that i have my number of orders 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2181)~~  i can place it in the report and it shows the number of orders that happen in different that happen with different delivery dates i can get rid of average delivery days and for example shows that as a column chart that shows that the majority of our orders are sold are shipped in two days then in three days a bit less four days again a bit less than one day and so on so we have all the distant all the we needed a calculated column because we wanted to slice by the column but if you remember what we wanted we do not want to have just the number of orders we want the percentage of orders uh against the percentage of orders delivered in one period against the total number of orders so let's change our calculation we keep a number of orders let me go back to a matrix so we can see the numbers i have the number of orders i need the total number of orders and then i need to divide one by the other so number of orders computes the value keeping the filter for delivery days and i want to have the total number of orders so we can create a new measure 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2273)~~  which is similar to this one therefore i copy the code of this measure and i build a new one that computes the distance count of sales order number where the store name is online store and i need to get rid of the filter from the delivery days so i need to do a remove filters of the delivery days this computes the grand total of all the i can place this measure here and it shows 3 3 5 1 everywhere now it's a matter of dividing the number of orders by the number of all orders so i can create a third measure that me computes the number not the percentage of orders which just divide the number of orders by the number of and this needs to be formatted as a percentage i can get rid of number of all orders take my percentage place it here and now this shows that in one day i sell 14.95 of the orders in two days 26.69 in three days 25.99 25.90 so i have created the measure that computes the percentage of all orders that are shipped in one day two day three days and so on i need to do a step further because what i want to have is not 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2385)~~  the number of orders sliced in this way by the delivery date i want to slice it by country so now that i have my measure percentage of orders i can go back here take my percentage where is it and place it here but that shows always a hundred percent because i'm no longer slicing by the number of orders and remember if we look at the final repo that we have we want to have the percentage of order shipped in one day one and two days one and three days one and from one to five days so that needs to be a cumulative percentage in order to compute the cumulative percentage i need to apply a filter to the filter context that says well the percent the number of delivery dates needs to be less or equal the boundary that i defined so i can again use calculate to create another measure that computes for example the number of orders that have been shipped in at most three days or in at most seven days by using again calculate so what we can do is create a new let's call it percentage seven days that uses calculate the percentage of orders and we apply a 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2481)~~  filter to the delivery days delivery days less or equal this computes the percentage of orders that have been shipped in at most seven we can place that in the report format it as a percentage and you see that it shows a 99.59 99.23 this is the percentage of order delivered in at most seven days and if i want three days i can do a similar calculation go here build a new measure where i just copied the code and i do the percentage for example for now my percentage three days computes formatted the proper way the percentage of three days i can also sort them the right way get rid of this percentage and now i my report starts to have a slightly better shape because i do have the country the customer country the average delivery days that is no longer useful so we can and i have the percentage over three days the percentage over seven days but let's go back to the result that we want to obtain you see that we have by country the number of days is on the column and this number is uh unequally distributed 1 2 3 5 7 10 15. whereas if i look at the report i have 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2588)~~  so far i have measured here percentage for 3 days for 7 days it is true you could create one measure for each number that you want to show in the reporter but that is not really elegant it would be better if we created a table that contains the number of days that we want to add on the columns and then we use that information in order to drive the calculation of our measure so our measure will not use three five seven as a fixed number that drives uh the maximum number of delivery days but it will derive this information from another table that we create in the model so what we need is a table that contains our numbers 1 2 3 5 7 9 10 and so on the best way or the easiest way to create such a table would be that of using a parameter table you can create a parameter table using power bi and that generates a table and builds some measures for you but the drawback is that the parameter table does not give you the freedom of choosing whatever sequence of numbers you want let me show you that you can go here in modeling create a new 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2671)~~  parameter you can provide the name the data type but then you have to provide the minimum the maximum and the step if i want to create one two five then i cannot because a parameter will be one two three four five with a step of 1 but we have the axon so we can create the table on the fly by just building a custom table by including numbers in curly braces so instead of creating that with a parameter i build the table as a calculated table let's call this table js and i can use curly braces the numbers that i want are 1 2 3 5 7 10 and 15. this green this generates a table with the numbers that i provided let me look at the result here in the data view and you see that we have our table containing all the different values 1 2 3 5 7 10 15. the column is named value which is not really a cool name i want to rename the column i could do it from here by just choosing the rename feature or i can use select columns because it is true i could use rename but i mean we are learning dax and there is a specific dax function that you can use to rename 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2766)~~  columns in a table or to reduce the number of columns in the table and this function is select columns you use select columns you pass to it a table and then you choose the columns that you want out of the original table plus you have the option of renaming them so we can simply go here we use select columns out of this table we want a new column that we call days and its expression is value let me get rid of that so select columns out of this table i take the column name value that is the column name that has been chosen by default by the constant table and i rename it as days the result of this table is now a table that contains one column days with the values that i want now what i can do is place this column on the columns of my matrix and then use the information because if i just place the column in on the columns of the matrix let me get rid of percentage seven days so we have only one value and from the days i grab number of days and place that on the column you see that that shows the same number everywhere because 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2860)~~  my code is not using the information stored in the days table it's just using the fixed value 7 3 or whatever was the number in that measure the next step is to grab that value and use it in my code so i have my percentage three days let me copy the code i can create a new measure will be percentage x days where x is whatever value we instead of three i need to use the value that is present on the columns and here i have another problem i cannot write here days days the reason is always the same we do not have a row context that provides a value to the days column in the days table we should have an iteration in order to have a raw context and here for this code an iteration does not make a lot of sense nonetheless there is a function that lets you grab the currently selected value in a table if the table has only one value visible in the current filter context this function is named selected value and lets you grab the individual value present in the filter context if there is only one let's call it x days where i use a selected value 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2973)~~  select the value then we store in another return i'm missing a parenthesis here and then now now that i have x days in my variable i can use it here instead of the fixed value 3. now this code is going to compute the percentage taking the value for the upper boundary from the columns or for whatever i used in order to filter only the given number of days that needs to be formatted as a percentage then we removed percentage three days and we place percentage x days now you see this is way better let me find some space so we see both the code and the result at the same time now this is telling me that i have 16.53 okay shipped in one day 39.60 in two days or one or two days and so on so now my percentage over x days is computing the number that i want the cumulative percentage of order shipped in at most the given number of days where i can configure the number of days so the values that appear on the column if i'm satisfied with those numbers i'm happy if i want to change them it's enough to change the content of the table that i placed on the column the 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3086)~~  days table and that will drive the calculation the right way still i have a couple of issues that i need to solve first of all you see that i'm showing a hundred percent here and i'm showing a hundred percent here if you remember what we had in the result let's take a look at that we do not want to see a hundred percent everywhere we want to see a hundred percent only when we reach a hundred percent for the first time then we want to blank out the measure we can add further logic for example i can go here and say well do not return the result if it is above a hundred percent or if it is a hundred percent if i do that i can check if result greater or equal that one remember that one means a hundred percent uh actually if the result is less than one then return the result otherwise return a blank the thing is if i hit enter now you see that all the values of a hundred percent disappear and that is not what we want to obtain we do not want to remove a hundred percent everywhere which is what this code is doing what we want to do is slightly different 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3173)~~  we want to show a hundred percent the first time and never again for the larger values therefore what we can do is check whether a hundred percent was already reached before if i'm showing five days i can ask well check if in four days we reached a hundred percent and if that is the case do not show the value because we already shown that for four so i need to check if in the previous value we reached a hundred percent we can do that we have our result we can create a new variable let's call it check or result where i compute this calculation but i use x days minus 1 the previous value and then i do not check result but i check if the previous result is less than one then show the result but if it happens that the previous result is a hundred percent or above if that were possible then hide the value if i hit enter now you see that something good is starting to happen even though we are not still perfect because we see a hundred percent here but we do not see it i need a bit more real estate okay we do not see it here we only see there for seven 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3277)~~  and that's the only 100 that we see everywhere now why is that the code now it's time to look at the code a bit better checks x days with x days -1 meaning that here in the column seven it will check it against six the column with ten will check it against nine but maybe a hundred percent was not reached in nine it was reached before or it was reached at a different point in time we cannot check with the previous value otherwise we do not show 10 because we reach it at 9 but we are not showing 9 anywhere therefore when we are showing the column for 10 we need to check it against 7 because my table contains a jump from 7 to 10. let me show you that by enlarging the table because it helps in understanding the problem let's go on the days table and we add all the gaps between seven and ten eight nine okay 8 9 10 15. if i now hit enter you'll see that i show a hundred percent of on eight i do not show it for nine and ten the problem is when my code makes the calculation for 10 it will not show the value because it has already been 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3369)~~  reached at 9 and it has already been reached at 8 but the thing is i'm not showing 8 i'm just showing 7 and then 10. so what i need to do is make sure that when i'm computing the value for 10 i check if at 7 i already shown 100 i ignore eight and nine and if i didn't show the value for seven i show a hundred percent for ten that requires a bit more work let's get rid of eight and ten so we go back to the problem the dashboard that shows the error and then we fix it my previous result is using x days minus one we cannot use x minus one we need to use the previous value that was present on the columns and how do i compute that well when i'm here in the column for 10 the previous value is 7. and how can i compute 7 7 is the maximum values in the days table that happens to be strictly less than the current value so for 10 the maximum value before 10 will be 7. that way i can compute the previous visible value that is a different value than just the previous value therefore i need another variable let's go i use calculate well let's start with 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3468)~~  max i take the maximum of four days days and then i need to restrict this days days where days days is strictly less than x days now my previous value actually i can compute previous x days and just to be consistent with the name so this is now the previous value that is 7 in the case of 10 and i use a previous x days here instead by doing that now with this code you see that the numbers are computed correctly i show 99.59 for seven and then i jump on a hundred percent to ten i don't know when between seven and ten that value has been reached the value 100 but depending on how i build my table they place on the columns i will obtain the correct result and we blanked out all the values after the i reach 100 for the first time so you have seen so far we have been able to create the entire calculation by combining different pieces of dax code still if we look at the final dashboard the final dashboard contains nearly the same values but it is also colored so we need to go for the next step that use that is color the right way 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3576)~~  my dashboard so i need to understand when my percentage is above or below the overall percentage therefore i need to compute the percentage for the current selection and the percentage for any for overall time and then i compare the two and i will build a measure that returns one if i want the cell to be green or blue and -1 if i want the cell to be red and i will use this measure in the conditional formatting feature of power pl power bi in order to color the background of my cells the right way therefore i need the measure that returns -1 or plus 1 depending on the relationship between the value of the percentage for the current selection and the value of the percentage over all all time all time all products or countries and so on let's call it previews no it's percentage of uh pct percentage xdays color i need first the current value so i store it in a variable current value which is then i need the total value the value of all orders let's call it total value how do i compute the total value the total value is here 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3682)~~  14.94 percent in order to compute this value what i need to do is get rid of the filter that happens to be on the country so i have a filter on country if i get rid of that i will obtain my grand total but i can do more than that instead of just removing the filter from the country i get rid of any filter so that i always obtain the grand total and that produces the number that i want so i can compute total value calculate its percentage over x days and i use remove filters sales that removes any filter from the size table and all the tables and have a then i compare one with the other and i say if carbon value is less that means i'm below the average and i want minus one otherwise i return plus one let's check that this actually computes a value let's say that germany is below 11 for 11 49 is less than 14 so i want germany to be minus one and i want canada to be plus one we can check that by adding percentage over x this color to the matrix and you see that we end up having germany with a minus one that is good and canada with a plus one again that is 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3811)~~  good our measure is computing the correct value now i can remove it from here i don't want the measure actually i want to use it to format the background so i we do conditional formatting of the background color we want to use a set of rules that is based on percentage over x day's color if the value is equal one as a number then we use this color because a plus one means good and then if the number is equal minus 1 that means bad and we call rita with something that resembles red and clicking on ok we have our result now this is the dashboard that we created right now and this other one is the dashboard that we had as a goal you see that we obtain the same result that the numbers are correct it is computing uh the percentage and everything is working the right way so as you have seen what we did was combining different functions different simple functions in a single calculation in order to obtain quite a complex dashboard there were no dax function able to compute the percentage of orders over time or the percentage of orders 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3904)~~  with a given number of delivery days but by combining dax expression we have been able to build some quite a complex calculation still as i anticipated at the beginning this code has a small glitch and understanding how to fix the glitch requires a bit more knowledge that i have been able to provide you in such a short video because you need to understand a lot more about the filter context and how the filter context is changed by the calculate function let me show you first where the problem is then we will see how to solve that small problem and finally we'll draw the real conclusion of the video let's say that i'm happy this model this report works fine and my users start to use it for example a user might start using it and add a slicer a slicer for here on the values we use let's say 15 points we can also exaggerate and go for 20. so when the user clicks on adatum you see that the numbers change only taking into account orders that contain a datum the thing is look at north wind traders if i look at north wind traders 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=4005)~~  germany and italy they are both colored in red even though the total is 971 percent so they are both above the total but still my measure is coloring them the wrong way therefore there is a glitch somewhere in my code i'm not computing the values correctly and i need to fix that i need to find where the problem is and it turns out that solving the problem is actually extremely simple but you need to know where to search and how to understand what the problem is specifically in my percentage over x day this is the calculation that i computed known the percentage x stays color okay what i need to do is fix the problem and to fix the problem i need to get rid of this remove filter sales remove filters specifically is removing any filter from the sales depending on what i want to obtain i need to change that remove filter to a different version i might need to use a all acceptor i might you need to use remove filters and values i might need to use all selected which in this very special case is likely to be the best option 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=4086)~~  so look what happens if i just replace that simple change will fix the problem of germany and italy and make the entire coloring right i just hit enter and now you see that the coloring happens the right way as it often happens with dax small changes they actually change a lot about how the code is being computed now through examples i cannot explain the details of what oscillator does or all the details about calculator or make you understand the theory the on the entire point of the video was to show you first that you do not need to know a lot of dax functions to build gorgeous calculations you need to know how to use the basic dax function and combine them together into a single calculation combining functions is much more powerful than just using predefined functions then of course you can use predefined functions if you have them but if not then you have the power of building your own calculation by yourself but then in order to combine those functions what you need are two ingredients first of all you need to understand 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=4172)~~  theory because every small change to your formula might have a strong impact on the final result and you need to understand that otherwise you write code that has glitches as we have seen during the demo moreover you also need practice the skills of combining simple functions in complex calculation comes with practice that is why in the training that i deliver i always teach theory first and practice later some theory and a lot of practice because to me this is the right way of learning dax if you just look at simple examples and you think that you are actually learning ducks i'm sorry but this is not what is happening worse you might have the feeling that you are learning but you're not learning it right you're not following the best path that makes the best usage of your time in learning this new language i do hope that you liked this video and that you appreciated how complex calculation can be actually solved with a small amount of knowledge all what you need to know is the row context the filter context these are the basics and we do have 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=4251)~~  context transition expand the tables a lot more theory but the solid foundation on the raw context and the filter context is already enough to build a lot of calculations and build cool reports that will work all the time if you want to learn them the right way well go to sqlbi.com and start right now attending the introduce index training it is free and it provides you with the foundation needed in order to write calculations like the one we have done so far if you want more then we do have the master index training that will go much deeper and teach you all the details all the theoretical and practical details it also has exercises and all what he needed to become a dark school and after that i hope that you 
# ru
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1)~~  Друзья Чао, добро пожаловать на новое видео от sql bi. Я Альберто Феррари, консультант по бизнес-аналитике и тренер по dax. Большую часть своего времени я провел, обучая daxa разным студентам по всему миру, в этом видео я хочу показать  вы новичок в dax, новичок в dax, вы ищете примеры в Интернете, потому что у вас есть идея, что, просмотрев множество примеров, вы можете расширить свои знания о dax и узнать детали, необходимые для  Решайте свои сценарии, дело в том, что примеры, которые вы можете понять в начале, это простые примеры, поэтому будет только одно простое выражение dax, содержащее одну или две формулы, которые решают конкретную проблему, и вы можете прийти к неправильной идее, что Изучение dax означает изучение подробностей обо всех функциях в dax, как будто всегда существовала функция для решения вашей конкретной проблемы. Реальный мир в большинстве случаев совершенно другой. В большинстве случаев ваш конкретный сценарий требует объединения различных функций в сложном налоговом коде, чтобы ваш уникальный  на вопрос на самом деле 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=85)~~  дан ответ, чтобы создать этот dax-код, вам нужно сначала изучить теорию и хорошо ее понять. сначала изучить теорию и хорошо ее понять. Я хочу показать это на примере, поэтому в этом видео мы будем не просто показывать, а не просто рассматривать различные функции и то, как они работают, это было бы слишком просто и в некотором смысле вводило бы в заблуждение. Вместо этого я хочу построить с вами довольно сложную панель мониторинга, требующую расчетов, для которых у нас нет каких-либо конкретных функциональных задач, которые нам понадобятся для создания кода, и я оставлю теорию для  как минимум, тем не менее, давайте начнем с совместного рассмотрения окончательного результата, который мы хотим получить, затем мы немного поразмышляем над всем видео, а затем начнем писать код dax, мы собираемся работать с моделью contoso, давайте начнем с быстрого рассмотрения окей, это модель данных, которая у нас есть. Contoso продает товары по всему миру, и продажи хранятся в таблице продаж. и продажи хранятся в таблице продаж. Вы можете купить свои товары в магазине. У нас есть 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=156)~~  разные магазины по всей планете, мы также продаем товары через Интернет и, конечно же, распродажи.  с покупателями случаются и другие таблицы, такие как дата и продукты, но на данный момент нас не интересуют эти таблицы, на данный момент самое важное - это магазин и продажи, если вы покупаете в интернет-магазине, если вы покупаете в физическом магазине, то происходит следующее что вы входите в магазин, берете свои товары, оплачиваете их, и вы счастливы, поэтому доставка товара совпадает с датой заказа, они происходят в тот же момент, но если вы покупаете в интернет- магазине, вы размещаете заказ и доставка этого товара занимает некоторое время, поэтому в таблице продаж есть две даты, которые являются наиболее актуальными для этой демонстрации: дата заказа и дата доставки. Этот первый заказ был размещен 22 февраля, но он был доставлен. 25 февраля, поэтому доставка заказа заняла три дня, и мы хотим провести анализ того, насколько хорошо мы доставляем заказы в разные страны по всей планете, поэтому окончательная панель мониторинга, которую мы 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=232)~~  собираемся создать, будет такой: показывает совокупный процент доставленных заказов по количеству дней доставки, позвольте мне показать вам подробную информацию о информационной панели, хорошо, у нас в столбцах указано количество дней, необходимых для доставки заказа, один день два дня три дня пять дней, тогда у нас есть разные  страны, в которые мы отправляем наши заказы, и здесь число в первой ячейке 16,53 означает, что 16,53 от общего количества заказов было отправлено только за один день, тогда у нас есть два 39,67. Это совокупный процент, означающий, что это число 39,67 включает заказы, отправленные в  один день и два дня, и число всегда растет, поэтому здесь семь, что говорит о том, что 95,59 заказов в Австралии были отправлены не более чем за семь дней, а затем, когда мы достигнем ста процентов, мы знаем, что все заказы были отправлены не более чем за семь дней.  10-дневная информационная панель также должна раскрасить ячейки, которые вы видите: некоторые ячейки окрашены в синий цвет, некоторые другие окрашены в красный цвет, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=320)~~  и причина этого в том, что мы сравниваем каждую ячейку с глобальным процентом, синие ячейки находятся над глобальным. процент, тогда как красные ячейки ниже 12,90 ниже 14,95, поэтому мы хотим предоставить пользователю визуальный цвет, визуальную информацию, которая быстро показывает, лучше или хуже мы в конкретной стране, чем в среднем, наконец, говоря о панели мониторинга, которую вы видите, когда  мы начинаем, когда достигаем ста процентов, мы прекращаем показывать дальнейшие значения, как только мы достигаем ста процентов, в течение семи дней в Германии, Италии и Нидерландах, мы не показываем дальнейшие значения, что позволяет легче сосредоточиться на цифрах, где они актуальны, создавая  информационные панели потребуют некоторой работы, нам нужно сначала вычислить количество дней, необходимых для доставки заказа, затем нам нужно будет разбить и вычислить процент заказов, доставленных в разные дни, и, наконец, правильно раскрасить информационную панель.  предстоит проделать много работы, и, как вы могли догадаться, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=397)~~  нет функций dax, которые помогли бы нам с одной строкой налогового кода, нам нужно будет написать его вместе, я сведу теорию к минимуму, необходимому для понимания кода.  то, что мы пишем, я объясню некоторую теорию, потому что базовая теория контекста строки, контекста фильтра и функций вычисления необходимы для того, чтобы понять, что мы делаем, тем не менее, ближе к концу видео я покажу вам, что  код, который мы написали, на самом деле содержит небольшой сбой, и исправление этого небольшого сбоя требует гораздо больше знаний, это всего лишь одна строка, которую нужно изменить, но вы должны это знать и знать, что вам нужна теория, поэтому цель видео — показать  вы, как написать сложный налоговый кодекс, как объединить простые функции, как понять основную теорию и, надеюсь, это поднимет ваше любопытство, чтобы узнать больше о daxa, если это так, угадайте, какие у нас есть тренинги, у нас есть вводное обучение daxa, которое  бесплатен, и вы можете найти его на sqlbi.com, и если вы хотите пойти дальше, вы можете учиться, пройдя 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=477)~~  обучение по налогообложению, которое фактически превратит вас в гуру, тем не менее, давайте начнем с рассуждений поверх кода, который нам нужно написать как  мы сказали, что нам нужно вычислить количество дней, необходимых для доставки заказа, и если мы посмотрим на таблицу заказов, у нас есть эти два столбца, у нас есть дата заказа и данные о доставке, дата заказа и данные о доставке, количество дней, необходимых для доставки.  заказ — это просто разница между датой доставки и индексом данных заказа. Вы можете вычислить разницу между двумя днями, просто вычитая один день из другого, чтобы мы могли создать вычисляемый столбец, который вычитает из даты доставки дату заказа и дает количество дней, необходимое для доставки заказа, количество дней, необходимое для доставки заказа, чтобы мы могли сделать это, просто создав в таблице продаж новый столбец, который мы называем днями доставки, сначала имя столбца, а затем выражение, которое мы хотим вычислить, которое представляет собой дату доставки минус  дата заказа, как я уже сказал, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=554)~~  вычитание двух столбцов дает количество дней, к сожалению, результат не совсем идеален. Вы видите, что дни доставки показывают данные, а не число, и причина в том, что одна дата минус другая дата дает данные, если мы хотим  преобразуем это в число, нам нужно преобразовать его с помощью функции in, число, нам нужно преобразовать его с помощью функции in, если я преобразую это в конец, говорит дату доставки минус говорит дату заказа, теперь это дает число, которое я хочу видеть три дня четыре дня один день два дня и так далее справа  теперь это столбец, и столбец можно использовать непосредственно в отчете, чтобы показать его значение, его совокупное значение, давайте сделаем это теперь, когда у нас есть дата доставки, мы можем перейти сюда, в страну, в отчет, который разбивается по стране клиента. говорит, что у нас есть дни доставки, я просто бросаю это здесь, и вы видите, что там показаны даты доставки, но число выглядит неправильным, на самом деле это не так, это сумма дней доставки, потому что по умолчанию движок агрегирует столбец в 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=628)~~  числовом столбце, используя сумму, которую мы  нас не интересует сумма, которую мы хотим, может быть, среднее число дней доставки, потому что это имеет гораздо больше смысла, вы можете сделать это через пользовательский интерфейс, чтобы я мог перейти сюда под датами доставки и вместо отображения суммы я могу использовать среднее значение, поэтому я просто  нажмите «Среднее», и теперь я покажу среднее количество дней доставки, прежде чем двигаться дальше. Одна важная деталь: вы видите, что мы создали столбец, который может содержать два, один, четыре, любое необходимое количество дней, но когда мы проецируем столбец в матрице, это  всегда показывает совокупное значение, оно не показывает значение столбца, по умолчанию это может быть сумма, это может быть среднее значение или что-то еще, что вы хотите, но значение, отображаемое в матрице, всегда является совокупным значением, это не те столбцы, которые вы на самом деле  вычислили столбцы, рассчитанные столбцы сохраняются в модели, а затем используются для построения 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=693)~~  агрегата, давайте немного больше сосредоточимся на деталях числа, это число 1,74 слишком мало, я знаю модель и знаю, что мы не так уж хороши  мы не можем доставить наши заказы в среднем за 1,70 дня. Причина в том, что, как я уже говорил ранее, у нас есть физические магазины и интернет- магазин, и разница в том, что дни доставки имеют смысл только для интернет-магазина, для физических магазинов это значение будет  всегда будет нолем, но прямо сейчас, если я просто вычисляю среднее значение, я также усредняю ​​все заказы с нулевыми днями доставки, также усредняю ​​все заказы с нулевыми днями доставки, объединяя их вместе прямо сейчас, я делю страну своего клиента, но чтобы лучше понять ее, вместо того, чтобы использовать страну клиента, которую мы можем использовать  страна магазина в строках, и вы видите, что для всех стран отображается ноль, теперь это страна магазина, за исключением интернет-магазина, где указано 2,95, что является гораздо более значимым числом, я хочу, чтобы моя мера вычислила 2,95, я не хочу  1.70, потому что 1.70 просто неправильный, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=774)~~  поэтому я мог бы добавить в отчет фильтр, который показывает только продажи интернет-магазина. Проблема с добавлением фильтра в отчет заключается в том, что вам всегда нужно помнить о добавлении фильтра, и если  пользователь просто размещает меру или помещает расчет в отчет, не помня о фильтре для интернет- магазина, числа будут неправильными, поэтому вычисляемый столбец был хорошим вариантом, но было бы лучше, если бы мы построили расчет, который автоматически включает фильтр  поэтому пользователь просто перетащит показатель в отчет, и число всегда будет правильным, поэтому мы не можем просто использовать вычисляемый столбец, нам нужно написать показатель, показатель является агрегированием, вычисление, которое работает на уровне агрегирования, это не так.  работать построчно, как это делают вычисляемые столбцы, и это возможно. Мы сможем в показателе добавлять фильтры и изменять логику расчета, поэтому давайте начнем писать показатель, и мы начали с того, что взяли код дней доставки, который здесь, пусть  я просто копирую код, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=851)~~  и мы создаем новую меру, которая уже агрегирует среднее значение, поэтому мы теперь называем ее средними днями доставки, если я напишу то же выражение, которое использовал раньше для столбца, который вы видите, что у меня есть или ошибка, говорит ошибка  я не могу найти данные доставки имени как для даты доставки, так и для даты заказа, поэтому у меня есть две ошибки с простым выражением, в чем причина этого, чтобы понять это, нам нужно ввести концепцию контекста строки, поэтому позвольте мне получить  Избавьтесь на данный момент от этой меры, и позвольте мне объяснить, как работает вычисляемый столбец, когда вы пишете выражение вроде этого: говорит дата доставки минус говорит данные заказа в вычисляемом столбце, что делает механизм: он вычисляет столбец построчно, чтобы он запустился  в первой строке он вычисляет значение, затем переходит ко второй строке, он вычисляет значение и сохраняет эти значения в таблице, но важным моментом является то, что вычисление происходит построчно, технически мы говорим, что существует 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=926)~~  контекст строки, который движок  знает, в какой строке он находится при вычислении значений, поэтому, если мы посмотрим на данные здесь, поскольку наше выражение использует дату заказа и данные о доставке, механизм запустится здесь в первой строке, механизм запустится здесь в первой строке, он захватит значение данных заказа, данные о доставке вычтут единицу  из другого данные о доставке вычтут единицу  из другого вычисляет результат и сохраняет его, другими словами, механизм всегда знает, в какой строке он находится, при вычислении значений, то есть наличие контекста строки значений, то есть наличие контекста строки в мере, все по-другому, мера не вычисляется построчно, мера  вычисляется на совокупном уровне, когда существует множество строк, которые необходимо агрегировать вместе, поэтому выражение говорит, что дата доставки не имеет значения, механизм не знает, какую строку использовать для вычисления значения столбца даты доставки вычисления значения столбца даты доставки в мере  вам всегда нужно использовать 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=993)~~  либо агрегирование, либо вам нужно ввести контекст строки, запустив вручную итерацию, позвольте мне показать вам это, чтобы у нас был код, мера, те, которые у нас есть, у нас есть столбец, мы можем вернуться и написать меру, теперь зная, что она будет  не работает с простым кодом, поэтому еще раз щелкните правой кнопкой мыши новую меру как мы уже говорили, мы не можем записать дату поставки продажи минус дату заказа на продажу, потому что механизм не знает, какую строку использовать для предоставления значения даты доставки и даты заказа, но  мы можем ввести контекст строки, начав итерацию, поэтому вместо того, чтобы просто записывать разницу таким образом, мы можем сделать другие выражения, а не продажи выражения, которое мы написали ранее, теперь среднее x вводит итерацию, двигатель из-за среднего x запустится  сканируем таблицу продаж и вычисляем выражение, которое мы предоставляем в качестве второго аргумента среднего значения x по строкам, поэтому здесь у нас есть контекст строки, поэтому это выражение вычисляется внутри необработанного 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1083)~~  контекста, и теперь вы видите, что у нас больше нет ошибок, которые я могу  нажмите Enter, отформатируйте его как десятичное число с двумя десятичными знаками, поместите его сюда, и вы увидите, что теперь мое среднее число дней доставки вычисляет то же значение, что и среднее число дней доставки, поэтому я просто переписал код в качестве меры, нам все еще нужно добавить фильтрующую часть.  но пока мы здесь, поскольку мы создали показатель среднего числа дней доставки, нам на самом деле больше не нужен вычисляемый столбец среднего числа дней доставки. Имейте в виду, что вычисляемые столбцы хороши, и вы можете использовать их в своей модели данных, но они увеличивают размер модели.  каждый вычисляемый столбец использует пространство в вашей модели, поэтому, хотя для новичков полезно использовать вычисляемые столбцы, когда вы узнаете больше о dax, вы также поймете, что использование показателей является лучшей практикой, поэтому постарайтесь строить все свои вычисления с помощью мер, а не использовать вычисляемый столбец, потому что  это создает 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1151)~~  модель меньшего размера, а также в несколько раз более быструю, поэтому давайте избавимся от вычисляемого столбца, в котором указаны дни доставки, мы просто удалим его, не переименовываем, а удаляем из модели, хорошо, и теперь у нас есть средние дни доставки, и теперь у нас есть средние дни доставки, как я уже сказал, мы  все еще нужно ввести фильтрацию, как я уже сказал, мы  все еще нужно ввести фильтрацию, теперь Averagex ввел итерацию, и он выполняет итерацию по продажам, давайте перейдем к нашим расчетам, он выполняет итерацию по продажам, поэтому он сканирует всю таблицу продаж, продажам, поэтому он сканирует всю таблицу продаж, мы хотим удалить из таблицы продаж заказы, которые не выполняются онлайн, и информацию  о том, где произошел заказ, это в таблице магазинов, где произошел заказ, это в таблице магазинов, здесь есть функция, которую мы можем использовать, это фильтр, мы фильтруем продажи, и здесь я хотел бы написать, где и здесь я хотел бы написать, где имя магазина но опять же у меня проблема, вы видите, что там 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1224)~~  написано, что  он не может найти магазин, он не может найти имя, имя, хотя в магазине у нас есть имя, но он не находит его, почему причина в том, что фильтр снова является итератором, он создает необработанный контекст для таблицы продаж, делает продажи  не содержать имя магазина, контекст строки, итерация происходит в таблице продаж, хранилище — это другая таблица, и у нас там нет контекста строки, поэтому, если мы хотим получить доступ к хранилищу текущих продаж, мы не можем просто написать название магазина  нам нужно использовать связанную функцию, связанную с запуском из контекста текущей строки и позволяющую вам получить доступ к столбцам в таблицах, которые имеют связь с текущей строкой в ​​контексте текущей строки. Достаточно пойти сюда и сказать, что продажи фильтра были связаны, имя магазина равно онлайн.  магазин, и теперь вы видите, что проблема исчезла, теперь я могу нажать «Ввод», и вы видите, что среднее количество дней доставки отображается только для интернет-магазина, сейчас я разрезаю по названию магазина, помните, что мы разрезали по 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1303)~~  странам по странам клиента, поэтому  давайте избавимся от страны магазина и вместо этого поместим избавимся от страны магазина и вместо этого поместим страну клиента на розу. Теперь это среднее число дней доставки является правильным значением, только если учесть, что продажи, произошедшие онлайн с использованием фильтра, хороши, а фильтр - это функция, которая фильтрует и итерирует их. - это функции, которые очень часто используются в начале, но мы можем вычислить одно и то же значение, не используя контекст строки и связанную с ним функцию, а вместо этого полагаясь на контекст фильтра. Позвольте мне сначала объяснить, что такое контекст фильтра, это второй важный момент. тема о dax всякий раз, когда вы пишете расчет, расчет всегда происходит внутри фильтра, этот фильтр обычно создается с помощью Power Bi на основе отчета клиентского инструмента, который вы используете для построения расчета, позвольте мне показать вам, что с помощью приведенного здесь кода я измеряю среднюю доставку  дней перебирает таблицу продаж, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1370)~~  доставку  дней перебирает таблицу продаж, но вы видите, что в зависимости от того, какую страну я поместил в отчет, у меня разные значения 291 299 289 289. Причина, по которой у меня разные значения, заключается в том, что расчет происходит на разных подмножествах данных, хотя мой код  не говорит, что он работает над предметом данных, тем не менее фильтр, созданный отчетом, фильтрует все вычисления, поэтому, когда я пишу фильтр по продажам, эта ссылка на продажи не ссылается на все строки в продажах, а только на те строки, которые видны с учетом  фильтр, который размещен в отчете, поэтому для Германии это будут продажи в Германии для Италии, это будут продажи в Италии для Великобритании, это будут продажи в Великобритании. Контекст фильтра - это фильтр, который создается отчетом и влияет на все отчетом и влияет на все теперь расчеты power bi через матрицу или через отчет могут создавать контекст фильтра, поэтому контекст, в котором вычисляется ваш код, но у вас также есть возможность создать контекст фильтра самостоятельно, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1450)~~  используя функцию расчета, которая позволяет вам изменить контекст фильтра.  путем введения новых фильтров, поэтому вместо того, чтобы писать среднее значение по продажам фильтров, я мог бы избавиться от этого фильтра, перебрать продажи, взять этот код и встроить все в калькулятор, что сделает расчет, он создаст контекст фильтра, в котором видны только онлайн-продажи. просто скопируйте код фильтра, и одна хорошая вещь в расчете заключается в том, что вам больше не нужна связь, потому что расчет работает с контекстом фильтра, а не с контекстом строки, поэтому я могу просто написать имя магазина, равное интернет-магазину, и все, теперь мой средний x повторяется  над продажами, но это ссылка на продажи, которые происходят в контексте фильтра, который содержит фильтр для интернет-магазина, поэтому написание кода таким образом дает то же самое число, это лучшая практика, когда вы можете использовать расчет, всегда лучше использовать расчет  поскольку фильтр удаляет строки из таблицы, поэтому ему необходимо сканировать 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1531)~~  таблицу и избавиться от розы, тогда как метод расчета сначала применяет фильтры, на самом деле это неправильно, я имею в виду, что оптимизатор отлично справляется с работой как фильтра, так и вычисления с приличной скоростью, но с  тем не менее, всякий раз, когда вы можете использовать метод расчета для написания своего кода, на самом деле это немного лучше, теперь у нас есть наш расчет, который показывает хорошее число средний случай доставки, дело в том, что это число все еще неверно, оно неверно, даже если оно ближе к правильному  число, это действительно неправильное значение, почему же причина в том, что я перебираю продажи, поэтому мои расчеты усредняют строку за строкой по таблице продаж, но таблица продаж не содержит одну строку на заказ, она содержит одну строку на строку заказа один заказ будет иметь много строк, и мое среднее значение представляет собой усреднение отдельных строк, позвольте мне показать вам это с данными, если я перейду к просмотру данных и отсортирую их по вы увидите, что первый заказ 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1613)~~  269 500 содержит несколько  строки одна, две, три, четыре, пять строк, и пять раз у меня есть дата заказа и дата доставки, теперь x будет повторяться построчно и вычислять разницу между датой заказа и датой доставки для каждой отдельной строки, поэтому заказ с большим количеством строк будет  имеют гораздо больший вес, чем заказ всего с одной строкой, потому что я усредняю отдельные строки, было бы намного лучше, если бы я мог вычислить среднее значение на уровне заказа, но я не могу, потому что моя модель не содержит данных на уровне заказа. детализация заказа он содержит данные с детализацией строки заказа, что я могу сделать, так это вместо перебора продаж перебрать другую таблицу, которая имеет правильную степень детализации, то есть порядок, который я мог бы создать таким образом, физическую таблицу в модели на уровне заказа  только ради этого расчета или того, что я могу сделать, и было бы лучше агрегировать значения непосредственно перед их итерацией, поэтому создайте своего рода временную таблицу, содержащую 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1692)~~  номер заказа и столбцы, необходимые для выполнения моего расчета, который мы делаем  иметь индекс функции, который выполняет группировку и суммирует ее. sum может сканировать таблицу и группировать ее по набору столбцов, которые вы предоставляете, поэтому мне не нужно будет вместо этого создавать физическую таблицу, я просто построю временную таблицу на лету, повторяю  в верхней части и вычислим мои вместо того, чтобы перебирать продажи, я буду перебирать сгруппированную версию продаж и использовать Я могу суммировать продажи по номеру заказа на продажу. Я могу суммировать продажи по номеру заказа на продажу. Теперь суммирование возвращает все отдельные значения номера заказа в  таблица продаж, но вы видите, что у меня все еще есть проблема, если я перебираю сводные продажи по номеру заказа, я больше не могу получить доступ к дате доставки и дате заказа, почему это снова контекст строки, теперь, когда я перебираю таблицу, сгруппированную по  содержат только номер заказа. У меня больше нет доступа ни к дате доставки, ни к дате заказа. Мне 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1776)~~  нужно сгруппировать не только номер заказа, но и дату доставки номера заказа и дату заказа, чтобы результирующая таблица содержала три столбца и  Кроме того, я могу выполнять расчеты, поэтому мне нужно суммировать по номеру заказа на продажу, дате заказа на продажу и и дате поставки. Если я суммирую по трем столбцам, теперь вы видите, что intellisense больше не выдает ошибку, потому что таблица, возвращаемая  итоговая информация содержит номер заказа, дату заказа и дату доставки. Если я нажму «Ввод», вы увидите, что числа ниже изменились и теперь имеют другое значение. Теперь эта группировка методов работает, пока гарантировано, что каждый заказ имеет только одну дату заказа и  одна дата доставки, если по какой-либо причине для одного и того же номера заказа у меня разные даты заказа или разные даты доставки, тогда мое агрегирование будет неправильным, и мне придется работать намного больше, мы можем проверить, можем ли мы посмотреть на результат  суммируйте и проверяйте, есть ли только одна строка для каждого заказа, что означает, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1856)~~  что комбинации даты заказа, даты доставки и номера заказа уникальны, поэтому мы можем просто взять код суммирования и создать расчетную таблицу, позвольте мне скопировать этот код, мы идем сюда, чтобы посмотреть  результат, и мы создаем новую таблицу, это просто временная таблица для тестирования, поэтому тест кроме того, это также полезный метод, когда вы хотите очень быстро проверить результаты и видите, что результатом является таблица который содержит номер заказа, дату заказа и дату доставки, именно то, что я ожидал, но сколько там строк, я ожидал, но сколько там строк, если мы посмотрим на число, которое у нас есть, у нас есть строк, так что это количество строк в итоговой таблице суммирования, сколько  значения есть ли у нас в номере заказа еще раз, мы можем проверить это, просмотрев продажи, просто нажмите на номер заказа, и у нас есть 508, хорошо, вот это Иван 5819 приличные значения, это означает, что результат суммирования имеет то же количество строк, что и число  заказов, которые у нас есть в модели, поэтому наши расчеты безопасны, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=1956)~~  каждый заказ имеет только одну дату заказа и одну дату доставки, теперь, когда мы проверяем, что мы можем избавиться от тестовой таблицы, которая была полезна только для вычисления этого числа, теперь у нас есть расчет средней даты доставки, который вычисляет правильное значение, поэтому первый шаг завершен, теперь мы можем вычислить количество дней доставки и разбить его по странам, но вам нужно помнить, что это не было нашим источником, наша конечная цель пусть  Я еще раз покажу вам окончательный результат: мы хотим вычислить процент заказов, доставленных за один день, два дня, три дня и так далее, поэтому нам нужно иметь возможность разделить количество дней, а затем вычислить этот процент, который мы можем  начните работать над этим, например, взглянув на распределение заказов по количеству заказов, разделив его на количество дней доставки, поэтому я могу создать новый раздел « Позвольте мне сделать это с» на новой странице вместо разделения по странам.  Возможно, я захочу разделить количество дней доставки, и теперь у меня небольшие проблемы, потому что мы 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2044)~~  удалили столбец, содержащий количество дней для доставки заказа. Дело в том, что если вы хотите вычислить какое-то значение, какое-то агрегированное значение, тогда меры будут  хорошо, но если вы хотите нарезать кубиками или фильтровать по значениям, тогда меры — не лучший инструмент, вы не можете использовать меру и поместить ее в строки или столбец сводной таблицы, для этого вам нужен столбец, поэтому нам нужно  снова введем наш столбец дней доставки, это несложно, мы просто создаем новый столбец, это были библиотечные дни, которые, как мы знаем, представляют собой целую часть теперь, когда она у нас есть в виде столбца, я могу удалить страну, поместив количество  дни доставки на розе, и теперь у меня есть дни доставки и среднее количество дней доставки, а это не то число, которое я хочу, я хочу, чтобы количество заказов, доставленных за один день, чтобы вычислить количество заказов, я могу вычислить количество расстояний номер заказа, я не могу просто использовать строки счетов продаж, потому что это будет вычислять 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2127)~~  количество транзакций, которые мне нужны для расчета расстояния номера заказа, и нам также нужно помнить, что мне всегда нужно ограничивать расчет онлайн-продажами, поэтому две продажи, которые  происходит в интернет- магазине, это будет отдельный вид это будет отдельный вид и мне нужно добавить фильтр для магазина, чтобы мы добавили калькулятор, эта вещь хорошо подсчитывается, название магазина хорошо подсчитывается, название магазина и теперь, когда у меня есть количество заказов, я могу поместить его в отчет, и он показывает количество заказов, которые происходят в разные дни, которые происходят с разными датами доставки. Я могу избавиться от средних дней доставки и, например, показывает это как Столбчатая диаграмма, показывающая, что большинство наших заказов продано и доставлено в течение двух дней, затем через три дня, чуть меньше, еще раз в четыре дня, чуть меньше одного дня и так далее, поэтому у нас есть все отдаленные все мы  нужен вычисляемый столбец, потому что мы хотели разрезать по столбцу, но если вы помните, чего мы хотели, мы 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2231)~~  не хотим иметь только то количество заказов, которое нам нужно, процент заказов, э-э, против процента заказов, доставленных за один период, по отношению к общему количеству  заказов, поэтому давайте изменим наш расчет, мы сохраняем количество заказов, позвольте мне вернуться к матрице, чтобы мы могли видеть числа, у меня есть количество заказов, мне нужно общее количество заказов, а затем мне нужно разделить один на другой, так что  Количество заказов вычисляет значение, сохраняющее фильтр для дней доставки, и я хочу иметь общее количество заказов, чтобы мы могли создать новую меру, похожую на эту, поэтому я копирую код этой меры и создаю новую, который вычисляет расстояние для номера заказа на продажу, где название магазина — интернет-магазин, и мне нужно избавиться от фильтра по дням доставки, поэтому мне нужно удалить фильтры по дням доставки, это вычисляет  общая сумма всех Я могу разместить эту меру здесь, и она везде показывает 3 3 5 1. Теперь нужно разделить количество заказов на количество всех заказов, чтобы я мог создать третью меру, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2328)~~  которая  я вычисляю число, а не процент заказов, которые просто делят количество заказов на количество и это нужно отформатировать в процентах. Я могу избавиться от количества всех заказов, возьми мой процент, помести его здесь и сейчас, это показывает  что за один день я продаю 14,95 заказов за два дня 26,69 за три дня 25,99 25,90, поэтому я создал показатель, который вычисляет процент всех заказов, отправленных за один день, два дня, три дня и т. д., мне нужно сделать шаг дальше, потому что мне нужно не количество заказов, разделенных таким образом по дате доставки, я хочу разбить его по странам, поэтому теперь, когда у меня есть показатель процента заказов, я могу вернуться сюда и взять свой процент, где он  и разместите его здесь, но это всегда показывает сто процентов, потому что я больше не делю количество заказов и помните, что если мы посмотрим на окончательное репо, которое у нас есть, мы хотим, чтобы процент заказа был отправлен за один день, один и два.  дни один и три дня один и от одного до пяти дней, так что это должен 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2427)~~  быть совокупный процент, чтобы вычислить совокупный процент, мне нужно применить фильтр к контексту фильтра, который хорошо определяет процент, количество дат доставки должно быть  меньше или равно границе, которую я определил, поэтому я могу снова использовать функцию расчета для создания другой меры, которая вычисляет, например, количество заказов, которые были отправлены максимум за три дня или максимум за семь дней, используя повторное вычисление, и что мы можем сделать  создаем новую назовем ее процентом семи дней, которая использует расчет процента заказов и применяем фильтр к дням доставки, дни доставки меньше или равны, это вычисляет процент заказов, которые были отправлены  максимум за семь мы можем указать это в формате отчета в процентах, и вы видите, что он показывает 99,59 99,23 это процент заказа, доставленного максимум за семь дней, и если я хочу три дня, я могу сделать аналогичный расчет идите сюда, создайте новый показатель, где я только что скопировал код и вычисляю процент, например, за теперь мой процент за три дня 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2534)~~  теперь мой процент за три дня вычисляется правильно, процент за три дня я также могу правильно отсортировать, избавьтесь от этого процента и теперь мой отчет начинает иметь немного лучшую форму, потому что у меня есть страна, страна клиента, среднее количество дней доставки, которое больше не полезно, поэтому мы можем и у меня есть процент за три дня, процент за семь дней но давайте вернемся к результату, который мы хотим получить. Вы видите, что у нас есть по странам количество дней в столбце, и это число распределено неравномерно: 1 2 3 5 7 10 15. тогда как, если я посмотрю на отчет, я  До сих пор я измерял здесь проценты в течение 3 дней в течение 7 дней. Это правда, что вы можете создать одну меру для каждого числа, которое вы хотите показать в репортере, но это не совсем элегантно, было бы лучше, если бы мы создали таблицу, содержащую  количество дней, которое мы хотим добавить в столбцы, а затем мы используем эту информацию для расчета нашего показателя, поэтому наш показатель не будет использовать три пять семь в качестве фиксированного числа, которое 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2627)~~  определяет максимальное количество дней доставки, но  он будет получать эту информацию из другой таблицы, которую мы создаем в модели, из другой таблицы, которую мы создаем в модели, поэтому нам нужна таблица, содержащая наши числа 1 2 3 5 7 9 10, и так далее, лучший или самый простой способ создать такую ​​​​таблицу будет следующим: Используя таблицу параметров, вы можете создать таблицу параметров с помощью Power Bi, которая генерирует таблицу и строит для вас некоторые показатели, но недостатком является то, что таблица параметров не дает вам свободы выбора любой последовательности чисел, которую вы хотите, позвольте мне показать вы можете перейти сюда, в моделировании, создать новый параметр, вы можете указать имя, тип данных, но тогда вы должны указать минимум, максимум и шаг, если я хочу создать один, два, пять, тогда я не могу, потому что параметр будет один два три четыре пять с шагом 1, но у нас есть аксон, поэтому мы можем создать таблицу на лету, просто создав пользовательскую таблицу, включив числа в 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2698)~~  фигурные скобки, поэтому вместо того, чтобы создавать ее с параметром, я создаю таблицу как вычисляемую  таблица, давайте назовем эту таблицу js, и я могу использовать фигурные скобки, числа, которые мне нужны, - это 1, 2, 3, 5, которые мне нужны, - это 1, 2, 3, 5, 7, 10 и 15. Этот зеленый цвет создает таблицу с числами, которые я предоставил, позвольте мне посмотреть на  результат здесь, в представлении данных, и вы видите, что у нас есть таблица, содержащая все различные значения: 1 2 3 5 7 10 15. столбец имеет имя value, что на самом деле не очень хорошее имя. Я хочу переименовать столбец, из которого я мог бы это сделать.  здесь, просто выбрав функцию переименования, или я могу использовать выбор столбцов, потому что это правда, я мог бы использовать переименование, но я имею в виду, что мы изучаем dax, и есть специальная функция dax, которую вы можете использовать для переименования столбцов в таблице или для уменьшения количества  столбцов в таблице, и эта функция выбирает столбцы, которые вы используете, выбираете столбцы, вы передаете в нее 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2776)~~  таблицу, а затем выбираете нужные столбцы из исходной таблицы, плюс у вас есть возможность переименовать их, чтобы мы могли просто пойти сюда мы используем столбцы выбора из этой таблицы, нам нужен новый столбец, который мы называем днями, и его выражением является значение, позвольте мне избавиться от этого, поэтому выберите столбцы из этой таблицы, я беру значение имени столбца, которое является выбранным именем столбца по умолчанию с помощью постоянной таблицы, и я переименовываю ее в дни. Результатом этой таблицы теперь является таблица, содержащая один столбец дней со значениями, которые мне нужны. Теперь я могу поместить этот столбец в столбцы моей матрицы, а затем использовать  информацию, потому что, если я просто помещу столбец в столбцы матрицы, позвольте мне избавиться от процентов за семь дней, чтобы у нас было только одно значение, и из дней чтобы у нас было только одно значение, и из дней я беру количество дней и помещаю его в столбец, который вы видите, что это показывает везде одно и то же число, потому что 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2860)~~  мой код не использует информацию, хранящуюся в таблице дней, он просто использует фиксированное значение 7 3 или какое бы то ни было число в этой мере, следующим шагом будет получение этого значения и использование его в моем коде, поэтому у меня есть  мой процент за три дня, позвольте мне скопировать код, я могу создать новую меру, будет равна проценту x дней, где x - это любое значение, которое мы вместо трех, мне нужно использовать значение, которое присутствует в столбцах, и здесь у меня есть еще одна проблема, я не могу написать здесь дни дни, причина всегда одна и та же, у нас нет контекста строки, который предоставляет значение столбцу дней в таблице дней, нам нужна итерация, чтобы получить необработанный контекст, и здесь  для этого кода итерация не имеет большого смысла, тем не менее, существует функция, которая позволяет вам получить выбранное в данный момент значение в таблице, если в таблице есть только одно значение, видимое в текущем контексте фильтра. Эта функция называется выбранным значением и позволяет вам  захватить 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=2955)~~  отдельное значение, присутствующее в контексте фильтра, если оно только одно, назовем ее x дней, где я использую выбранное значение, выберите значение затем мы сохраним в другой мне не хватает скобок здесь и затем теперь, когда у меня есть x дней в моей переменной, я могу использовать ее здесь вместо фиксированного значения 3. теперь этот код вычислит процент, этот код вычислит процент, беря значение для верхней границы из столбцов  или что-то, что я использовал, чтобы отфильтровать только заданное количество дней, которое нужно отформатировать в процентах, затем мы удалили процент за три дня и разместили процент за х дней, теперь вы видите, что это намного лучше, позвольте мне найти немного места, чтобы мы увидели  и код, и результат одновременно теперь это говорит мне, что у меня 16,53 порядке, отправленных за один день, 39,60 за два дня или один или два дня и так далее, так что теперь мой процент за x дней рассчитывает число  что я хочу, чтобы совокупный процент заказов был отправлен не более чем за заданное количество дней, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3071)~~  где я могу настроить количество дней так, чтобы значения отображались в столбце, если меня устраивают эти цифры, я буду рад, если захочу изменить  им достаточно изменить содержимое таблицы, которую я поместил в столбец таблицы дней, и это приведет к правильному расчету, но у меня есть пара проблем, которые мне нужно решить в первую очередь, вы видите, что я показываю  сто процентов здесь и я показываю сто процентов здесь, если вы помните, что мы получили в результате, давайте посмотрим, что мы не хотим видеть сто процентов везде, мы хотим видеть сто процентов только тогда, когда достигнем  сто процентов в первый раз, затем мы хотим исключить меру, мы можем добавить дополнительную логику, например, я могу пойти сюда и сказать: «Ну, не возвращайте результат, если он превышает сто процентов, или если это сто процентов, если я это сделаю».  что я могу проверить, больше или равен результат, что нужно помнить, что единица означает сто процентов, ну, на самом деле, если результат меньше единицы, то вернуть результат, в противном случае 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3153)~~  вернуть пробел, дело в том, что если я нажму Enter, теперь вы увидите, что все значения  сто процентов исчезают, и это не то, что мы хотим получить, мы не хотим удалять сто процентов везде, что и делает этот код, то, что мы хотим сделать, немного отличается, мы хотим показать сто процентов в первый раз и никогда  опять же для больших значений, поэтому мы можем проверить, были ли уже достигнуты сто процентов раньше, если я показываю пять дней, я могу спросить, хорошо ли мы проверяем, достигли ли мы за четыре дня сто процентов, и если это так, не показывайте  значение, потому что мы уже показали это для четырех, поэтому мне нужно проверить, достигли ли мы в предыдущем значении ста процентов, мы можем сделать, что у нас есть наш результат, мы можем создать новую переменную, назовем ее проверкой или результатом, где  я вычисляю этот расчет, но использую x дней минус 1 предыдущего значения, а затем не проверяю результат, но проверяю, меньше ли предыдущий результат единицы, а затем показываю результат, но если случается, что предыдущий результат составляет 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3248)~~  сто процентов или выше  если бы это было возможно, то скройте значение, если я нажму «Ввод», теперь вы увидите, что что-то хорошее начинает происходить, хотя мы еще не идеальны, потому что мы видим здесь сто процентов, но мы этого не видим, мне нужно немного больше недвижимости, окей мы не видим этого здесь мы видим там только семь, и это единственные 100, которые мы видим теперь повсюду, почему код теперь пришло время посмотреть на код немного лучше проверяет x дней с x днями -1 означает, что здесь в  столбец семь он проверит его по шести столбец с десятью проверит его по девяти, но, возможно, сто процентов не были достигнуты в девяти, они были достигнуты раньше или были достигнуты в другой момент времени, иначе мы не сможем сверить с предыдущим значением  мы не показываем 10, потому что достигаем его в 9, но мы нигде не показываем 9, поэтому, когда мы показываем столбец для 10, нам нужно сверить его с 7, потому что моя таблица содержит переход с 7 на 10. позвольте мне показать вам, что  увеличив таблицу, потому что это помогает понять 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3337)~~  проблему, давайте перейдем к таблице дней и добавим все пробелы между семью и десятью восемью девятью, хорошо 8 9 10 15. если я сейчас нажму Enter, вы увидите, что я показываю сто процентов  из восьми я не показываю его для девяти и десяти, проблема в том, что когда мой код выполняет расчет для 10, он не отображает значение, потому что оно уже было достигнуто в 9 и уже было достигнуто в 8, но дело в том, что я  Я не показываю 8, я просто показываю 7, а затем 10. Итак, что мне нужно сделать, это убедиться, что, когда я вычисляю значение для 10, я проверяю, показало ли я уже 100 в 7, я игнорирую восемь и девять, и если  я не показал значение для семи, я показываю сто процентов для десяти, что требует немного больше работы, давайте избавимся от восьми и десяти, поэтому вернемся к проблеме, панели мониторинга, которая показывает ошибку, а затем исправим мой предыдущий результат  использует x дней минус один, мы не можем использовать x минус один, нам нужно использовать предыдущее значение, которое присутствовало в столбцах, и как мне это хорошо вычислить, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3419)~~  в столбцах, и как мне это хорошо вычислить, когда я здесь, в столбце для 10, предыдущее значение равно 7. и как  Могу ли я вычислить 7? 7&nbsp;— это максимальные значения в таблице дней, которые оказываются строго меньше текущего значения, поэтому для 10 максимальное значение до 10 будет равно 7. Таким образом, я могу вычислить предыдущее видимое значение, которое отличается от значения только предыдущее значение, поэтому мне нужна еще одна переменная, давайте перейдем я использую, хорошо вычислить, давайте начнем с максимума, я возьму максимум четыре дня, максимума, я возьму максимум четыре дня, а затем мне нужно ограничить этот дней дней, где дней дней строго меньше x дней, теперь мое предыдущее значение на самом деле я могу вычислить предыдущие x дней и просто для соответствия имени, так что теперь это предыдущее значение, равное 7 в случае 10, и я использую  предыдущие x дней здесь вместо сделав это сейчас с этим кодом, вы увидите, что числа рассчитаны правильно, я показываю 99,59 для семи, а затем перепрыгиваю со ста 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3524)~~  процентов до десяти, я не знаю, когда между семью  и десять, это значение достигло значения 100, но в зависимости от того, как я построю свою таблицу, которую они поместят в столбцы, я получу правильный результат, и мы удалили все значения после того, как я впервые достиг 100, так что вы это видели  на данный момент нам удалось создать весь расчет путем объединения различных частей кода dax, но если мы посмотрим на окончательную панель мониторинга, окончательная панель мониторинга содержит почти те же значения, но она также окрашена, поэтому нам нужно перейти к следующему шагу, который использует это правильно ли раскрашена правильно ли раскрашена моя панель управления, поэтому мне нужно понять, когда мой процент выше или ниже общего процента, поэтому мне нужно вычислить процент для текущего выбора и процент для любого за общее время, а затем я сравниваю эти два значения и  построит меру, которая вернет единицу, если я хочу, чтобы ячейка была зеленой или синей, и -1, если я хочу, чтобы ячейка была красной, и я буду использовать эту меру в 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3609)~~  функции условного форматирования power pl power bi, чтобы раскрасить фон  из моих ячеек правильно, поэтому мне нужна мера, которая возвращает -1 или плюс 1 в зависимости от соотношения между значением процента для текущего выбора и значением процента за все время за все время все продукты или страны и так назовем ее предварительным просмотром, нет, это процент от процента, э-э, процент, процент, xdays, цвет, мне сначала нужно текущее значение, поэтому я сохраняю его в переменной текущего значения, которая представляет собой затем мне нужно общее значение, значение  из всех заказов назовем это общей стоимостью, как мне вычислить общую стоимость, общая стоимость составляет здесь 14,94 процента, чтобы вычислить это значение, что мне нужно сделать, это избавиться от фильтра, который случайно оказался в стране, поэтому у меня есть  фильтр по стране, если я избавлюсь от этого, я получу свою общую сумму, но я могу сделать больше, вместо того, чтобы просто удалять фильтр из страны, я избавляюсь от любого фильтра, чтобы всегда получать общую сумму, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3708)~~  которая дает число  что я хочу, чтобы я мог вычислить общую стоимость рассчитать ее процент за x дней, и я использую удаление фильтров продаж, которое удаляет любой фильтр из таблицы размеров и всех таблиц и имеет затем я сравниваю одно с другим и  я говорю, что если значение углерода меньше что означает, что я ниже среднего и я хочу минус один, в противном случае я возвращаю плюс один, который на давайте проверим, что это действительно вычисляет значение, скажем, что Германия  меньше 11 для 11 49 меньше 14, поэтому я хочу, чтобы Германия была минус один, и я хочу, чтобы Канада была плюс один, мы можем проверить это, добавив процент к x этого цвета в матрицу, и вы увидите, что в конечном итоге мы получим Германию с  минус один, это хорошо, и Канада с плюсом еще раз, это хорошо, наша мера вычисляет правильное значение, теперь я могу удалить его отсюда, на самом деле мне не нужна эта мера, я хочу использовать ее для форматирования фона, поэтому я  выполнить условное форматирование цвета фона, мы хотим использовать набор правил, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3829)~~  основанных на процентах от цвета x дня, если значение равно единице как число, тогда мы используем этот цвет, потому что плюс один означает хорошо, а затем, если число равно  равно минус 1, что означает плохо, и мы вызываем Риту чем-то похожим на красный и нажимаем «ОК», теперь у нас есть результат. и нажимаем «ОК», теперь у нас есть результат. получите тот же результат, что числа верны, это вычисление процентов, и все работает правильно, поэтому, как вы видели, мы объединили разные функции, разные простые функции в одном вычислении, чтобы получить там довольно сложную информационную панель.  если бы не было функции dax, способной вычислить процент заказов с течением времени или процент заказов с заданным количеством дней доставки, но, объединив выражение dax, мы смогли построить довольно сложные вычисления, как я и ожидал в начале этого кода  имеет небольшой сбой, и понимание того, как его исправить, требует немного больше знаний, которые я смог предоставить вам в таком коротком видео, потому что вам нужно гораздо больше понимать 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=3933)~~  контекст фильтра и то, как контекст фильтра изменяется с помощью функция расчета, позвольте мне сначала показать вам, в чем проблема, затем мы посмотрим, как решить эту небольшую проблему, и, наконец, мы сделаем реальный вывод из видео, скажем, я рад, что эта модель, этот отчет работает нормально, и мои пользователи начинают  например, чтобы использовать его, пользователь может начать использовать его и добавить срез, срез, для значений, которые мы используем, скажем, 15 пунктов, которые мы также можем преувеличить и  идите на 20. поэтому, когда пользователь нажимает на adatum, вы видите, что числа меняются только с учетом ордеров, которые содержат данные, дело в том, что посмотрите на торговцев северным ветром, если я посмотрю на торговцев северным ветром в Германии и Италии, они оба окрашены в красный цвет. хотя общая сумма составляет 971 процент, поэтому они оба превышают общую сумму, но моя мера все равно раскрашивает их неправильно, моя мера все равно раскрашивает их неправильно, поэтому где-то в моем коде есть сбой, я неправильно вычисляю значения, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=4024)~~  и мне нужно это исправить, что мне нужно найдите, где проблема, и окажется, что решить проблему на самом деле чрезвычайно просто, но вам нужно знать, где искать и как понять, в чем конкретно проблема, в моем проценте за x день, это расчет, который я вычислил, известный процент  x остается цветным, хорошо, что мне нужно сделать, это решить проблему, и чтобы решить проблему, мне нужно избавиться от этой удалить продажи фильтров удалить фильтры, в частности, удалить любой фильтр из продаж в зависимости от того, что я хочу получить, мне нужно это изменить  удалить фильтр в другую версию, возможно, мне придется использовать все акцептор, возможно, вам придется использовать удалить фильтры и значения, возможно, мне придется использовать все выбранные, что в этом очень особом случае, вероятно, будет лучшим вариантом, так что посмотрите, что произойдет, если я  просто замените это простое изменение решит проблему Германии и Италии и сделает всю раскраску правильной. Я просто нажал Enter, и теперь вы видите, что раскраска происходит правильно, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=4106)~~  как это часто бывает с небольшими изменениями dax, они действительно меняются.  много о том, как сейчас вычисляется код, на примерах. Я не могу объяснить детали того, что делает осциллятор, или все подробности о калькуляторе, или объяснить вам теорию, вся суть видео заключалась в том, чтобы сначала показать вам, что вы этого не делаете.  вам нужно знать множество функций dax для создания великолепных вычислений. вам нужно знать, как использовать базовую функцию dax и объединять их в одно вычисление. Объединение функций гораздо более эффективно, чем просто использование предопределенных функций, тогда, конечно, вы можете использовать предопределенные функции.  если они у вас есть, а если нет, то у вас есть возможность самостоятельно построить свои собственные расчеты, но затем, чтобы объединить эти функции, вам нужны два ингредиента. Прежде всего вам нужно понять теорию, потому что каждое небольшое изменение в вашей формуле может иметь  сильное влияние на конечный результат, и вам нужно понимать, что в противном случае вы напишете код, 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=4183)~~  который имеет сбои, как мы видели во время демонстрации, более того, вам также нужно практиковаться, навыки объединения простых функций в сложных вычислениях приходят с практикой, поэтому в обучении  Я всегда сначала преподаю теорию, а потом практикуюсь, немного теории и много практики, потому что для меня это правильный способ изучения dax, если вы просто смотрите на простые примеры и думаете, что на самом деле учите уток, извините, но это не то, что происходит, хуже, у вас может возникнуть ощущение, что вы учитесь, но делаете это неправильно, вы не следуете лучшим путем, который позволяет максимально эффективно использовать свое время при изучении этого нового языка. Я очень надеюсь, что вы  понравилось это видео, и вы оценили, насколько сложные вычисления можно решить с помощью небольшого количества знаний. Все, что вам нужно знать, это контекст строки, контекст фильтра. Это основы, и у нас есть переход контекста. Расширьте таблицы, намного больше теории.  но прочной основы на необработанном контексте и контексте фильтра уже 
 - ~~[▶](https://www.youtube.com/watch?v=f5IdCDF1fj4&t=4260)~~  достаточно, чтобы построить множество вычислений и построить классные отчеты, которые будут работать постоянно, если вы хотите изучить их правильно, зайдите на sqlbi.com и начните прямо сейчас посещение вводного тренинга по индексам бесплатно и дает вам основу, необходимую для написания расчетов, подобных тем, которые мы делали до сих пор, если вы хотите большего, то у нас есть мастер-тренинг по индексам, который пойдет гораздо глубже и научит вас всему  подробности, все теоретические и практические детали, там также есть упражнения и все, что ему нужно, чтобы стать темной школой, и после этого я надеюсь, что вы