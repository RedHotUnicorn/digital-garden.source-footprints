---
title: 'Теории вероятностей: готовимся к собеседованию и разрешаем «парадоксы» / Хабр'
date: 2022-06-03
src_link: https://www.notion.so/db7aeeb649b8478191b66514173919a4
src_date: '2022-06-03 10:58:00'
gold_link: https://habr.com/ru/companies/JetBrains-education/articles/498188/
gold_link_hash: aea106b5d46e5918bf38171f714b8bb3
tags:
- '#host_habr_com'
---

![](https://habrastorage.org/r/w780q1/webt/m0/fi/4n/m0fi4nf1gwyvzyf_vwa36_-onky.jpeg)  

Каждый год я участвую примерно в сотне собеседований в образовательных проектах [JetBrains](https://jetbrains.ru/): собеседую абитуриентов в [Computer Science Center](https://compscicenter.ru/) и [корпоративную магистратуру ИТМО](https://mse.itmo.ru/) (кстати, [набор](https://mse.itmo.ru/enrollment) на программу идёт прямо сейчас). Все собеседования устроены по одному шаблону: мы просим на месте порешать задачи и задаём базовые вопросы по дисциплинам, которые студенты изучали в университетах. Большинство вопросов, которые мы задаём, довольно простые — нужно дать определение некоторого понятия, сформулировать свойство или теорему. К сожалению, у значительной доли студентов все эти определения выветриваются сразу после экзаменов в университетах. Казалось бы, что тут удивительного? В современном мире любое определение можно за пару секунд нагуглить, если это нужно. Но невозможность восстановить базовое определение свидетельствует о непонимании *сути* предмета.   

  

Если непонимание алгебры или математического анализа может мало влиять на вашу жизнь, то непонимание теории вероятностей делает из вас лёгкую мишень для обмана и манипулирования. Суждения о вероятностях различных событий настолько глубоко вошли в нашу повседневную жизнь, что умение правильно рассуждать и отличать правду от невежества или манипуляции является необходимым. В этом небольшом обзоре мы поговорим о базовых понятиях теории вероятностей, научимся правильно формулировать утверждения про простые случайные процессы и разберём несколько парадоксов. Часть материала позаимствована из брошюры А. Шеня [«Вероятность: примеры и задачи»](https://www.mccme.ru/free-books/shen/shen-probability.pdf), которую я очень рекомендую для самостоятельного изучения.  

  

Перед тем, как говорить об определениях, нам нужно договориться о том, откуда же в нашем мире берётся случайность. Например, почему мы считаем, что подбрасывание монеты — это случайный процесс? С точки зрения классической физики, описывающей процессы в макромире, всё детерминировано, поэтому по параметрам подброса монеты можно однозначно определить, какой стороной она упадёт. Однако на практике оказывается, что измерить и учесть все силы, которые действуют на монетку фактически, невозможно, и поэтому результат этого эксперимента принято считать случайным. Важно понимать, что этот вопрос не является вопросом теории вероятностей. Теория вероятностей работает с моделями — для неё монетка, у которой орёл и решка выпадают одинаково часто, и монетка, у которой орлов в два раза больше, чем решек, — это просто две разные модели. Вопрос о том, какая из моделей больше соответствует наблюдаемой действительности — это вопрос нашего опыта (опыт показывает, что частота орла и решки примерно одинаковая). Таким образом, первым делом мы должны договориться о модели.   

  

Определения
-----------

  

Для определения модели, которая позволит нам говорить о вероятностях, нужно описать *вероятностное пространство*.   

  

*Вероятностное пространство* в самом простом конечном случае состоит из *множества элементарных исходов* ![$\Omega = \{a_1, a_2, \dotsc, a_n\}$](https://habrastorage.org/getpro/habr/formulas/fa7/0e0/aef/fa70e0aef3d10fab5da4c93aab6a63d5.svg) и набора неотрицательных чисел ![$\{p_1,p_2,\dotsc, p_n\}$](https://habrastorage.org/getpro/habr/formulas/312/d36/a4d/312d36a4d02bcf97057376ecbdba7d58.svg), таких что их сумма равна ![$1$](https://habrastorage.org/getpro/habr/formulas/3e4/c77/a6e/3e4c77a6e7c579a778fa84a18b6f4be0.svg). Довольно часто все исходы считаются равновероятными, т.е. ![$p_1=p_2=\dotsb=p_n$](https://habrastorage.org/getpro/habr/formulas/be5/7d4/fe5/be57d4fe5d477f83cc0c20ffa164ba13.svg). В более сложном бесконечном случае нужно отдельно выделять *множество интересующих нас событий* и задавать вероятности событий при помощи функции, называемой *вероятностной мерой*. *Событием* называется множество, состоящее из элементарных событий, т.е. любое подмножество ![$\Omega$](https://habrastorage.org/getpro/habr/formulas/7f9/5d3/492/7f95d3492d59cdaaf99bfd6d4d2919aa.svg). Вероятность события ![$E\subseteq \Omega$](https://habrastorage.org/getpro/habr/formulas/e14/e31/e2b/e14e31e2bdf2185b2d0f6a80831c554a.svg), обозначается ![$\Pr[E]$](https://habrastorage.org/getpro/habr/formulas/ec0/171/860/ec0171860c92b5d2e383b3d73a17585b.svg), — это сумма всех таких ![$p_i$](https://habrastorage.org/getpro/habr/formulas/08b/a9c/561/08ba9c56140cf603308f9b84a26dc818.svg), что ![$a_i\in E$](https://habrastorage.org/getpro/habr/formulas/7a2/632/237/7a263223720b6e36ec0b5a1d2250763b.svg). В частности, вероятность пустого события ![$E = \emptyset$](https://habrastorage.org/getpro/habr/formulas/cc6/f8b/48e/cc6f8b48e191b572c8abb0e77381c565.svg) равна нулю, а события ![$E=\Omega$](https://habrastorage.org/getpro/habr/formulas/925/4e3/7ff/9254e37ffa646732a9a2294723a1f1e1.svg) равна 1. В случае, когда все исходы считаются равновероятными, вероятность события просто равна отношению количества исходов, содержащихся в событии, к общему количеству элементарных исходов, т.е. ![$\Pr[E] = |E| / |\Omega|$](https://habrastorage.org/getpro/habr/formulas/971/161/78a/97116178a11c086d4b446aa147d3ea9b.svg).  

  

Вероятность любого события заключена между 0 и 1. Если вероятность события нулевая, то такое событие называется *невозможным*, если же вероятность события равна единице, то такое событие называется *достоверным*.  

  

Важно, что без определения вероятностного пространства нельзя (в математическом смысле) говорить о вероятности чего-либо.  

  

#### Замечание

  

На основе определения вероятностного пространства легко провести разделение между теорией вероятностей и статистикой: теория вероятностей предсказывает частоты на основе знания вероятностного пространства, а статистика решает обратную задачу — на основе наблюдаемых частот определяет параметры неизвестного вероятностного пространства.  

  

### Пример: подбрасывание монетки

   

Будем считать, что монетка ~~чеканная~~ «правильная» или «симметричная», т.е. она одинаково часто выпадает орлом и решкой, а на ребро никогда не встаёт. Тогда множество элементарных исходов состоит из двух элементов, ![$\Omega = \{ \text{ОРЁЛ}, \text{РЕШКА}\}$](https://habrastorage.org/getpro/habr/formulas/0b2/053/b0a/0b2053b0aae9999916cc1d5384e05c50.svg). Так как мы договорились, что монетка «правильная», то разумно считать, что ![$p_1 = p_2 = 1/2$](https://habrastorage.org/getpro/habr/formulas/6c6/6ac/f36/6c66acf3665bf146e9644d4f7cbc3a6d.svg). Теперь давайте перечислим все возможные события и их вероятности.  

  

1. Не выпадет ни орёл, ни решка. Это соответствует событию ![$E = \emptyset$](https://habrastorage.org/getpro/habr/formulas/cc6/f8b/48e/cc6f8b48e191b572c8abb0e77381c565.svg), ![$\Pr[E] = 0$](https://habrastorage.org/getpro/habr/formulas/d8f/3aa/bb2/d8f3aabb2e6ff8a8c15b7820daa5de27.svg).
2. Выпадет орёл, ![$E = \{\text{ОРЁЛ}\}$](https://habrastorage.org/getpro/habr/formulas/f55/5a6/4b5/f555a64b5f56e3748757aa7404f5a68d.svg), ![$\Pr[E] = 1/2$](https://habrastorage.org/getpro/habr/formulas/849/510/148/849510148cfabac6c2bca2664d293f34.svg).
3. Выпадет решка, ![$E = \{\text{РЕШКА}\}$](https://habrastorage.org/getpro/habr/formulas/6ce/11b/829/6ce11b829a9bcdd351fb45e3fc056e47.svg), ![$\Pr[E] = 1/2$](https://habrastorage.org/getpro/habr/formulas/849/510/148/849510148cfabac6c2bca2664d293f34.svg).
4. Выпадет орёл или решка, ![$E = \{\text{ОРЁЛ}, \text{РЕШКА}\}$](https://habrastorage.org/getpro/habr/formulas/596/cca/6ea/596cca6ea0e6a797c3a5b5a520459492.svg), ![$\Pr[E] = 1/2 + 1/2 = 1$](https://habrastorage.org/getpro/habr/formulas/077/3f8/b5d/0773f8b5d1d13978cf628022f1b5e8bd.svg).

  

#### Пример: подбрасывание игрального кубика

   

Как и в случае с монеткой мы будем предполагать, что игральный кубик выпадает всеми гранями одинаково часто. Тогда множество элементарных исходов состоит из шести элементов, ![$\Omega = \{ 1, 2, 3, 4, 5, 6\}$](https://habrastorage.org/getpro/habr/formulas/8a1/825/007/8a18250075e46cc675833171672bac3d.svg), все их вероятности равны ![$p_1 = p_2 = \dotsb = p_6 = 1/6$](https://habrastorage.org/getpro/habr/formulas/8d6/fc2/c07/8d6fc2c07f37d7f542ea30ffff633f3b.svg). Количество различных событий в этом эксперименте равно ![$64 = 2^6$](https://habrastorage.org/getpro/habr/formulas/10a/7a9/0c3/10a7a90c3ea8aa9e2474962773fe75e3.svg) (это количество всех подмножеств множества из 6 элементов). Удивительным образом вопрос «сколько существует различных событий в эксперименте с подбрасывание игрального кубика?», по моим наблюдения, ставит в тупик 9 из 10 абитуриентов.  

Давайте рассмотрим некоторые примеры событий.  

  

1. Выпадет 1, ![$E = \{1\}$](https://habrastorage.org/getpro/habr/formulas/e04/215/445/e04215445ca72fad9c0251a305c40e33.svg), ![$\Pr[E] = 1/6$](https://habrastorage.org/getpro/habr/formulas/87d/c94/f53/87dc94f53a0c218cdd08f30d95f04fed.svg).
2. Выпадет число большее трёх, ![$E = \{4, 5, 6\}$](https://habrastorage.org/getpro/habr/formulas/298/cba/451/298cba451cf6d50807faeab73dc6b362.svg), ![$\Pr[E] = 1/6 + 1/6 + 1/6 = 1/2$](https://habrastorage.org/getpro/habr/formulas/e38/8b4/a1a/e388b4a1acbbf2761fb5dc175142cfa8.svg).
3. Выпадет число кратное трём, ![$E = \{3, 6\}$](https://habrastorage.org/getpro/habr/formulas/f32/b3c/72d/f32b3c72df9c72449cdf2ee0e0ceda94.svg), ![$\Pr[E] = 1/6 + 1/6 = 1/3$](https://habrastorage.org/getpro/habr/formulas/c32/96c/467/c3296c467116a58d47613a7b35b335ba.svg).

  

#### Пример: два подбрасывания монетки

   

В тех же предположениях о «симметричености» монеты мы определим множество элементарных исходов как множество упорядоченных пар ![$\Omega = \{ (\text{ОРЁЛ}, \text{ОРЁЛ}), (\text{ОРЁЛ}, \text{РЕШКА}), (\text{РЕШКА}, \text{ОРЁЛ}), (\text{РЕШКА}, \text{РЕШКА})\}.$](https://habrastorage.org/getpro/habr/formulas/175/1ba/07c/1751ba07cff5f6dfcffefd39249163e2.svg)

 Симметриченость монетки позволяет нам заключить, что все элементарные исходы равновероятны, т.е. ![$p_1 = p_2 = p_3 = p_4 = 1/4$](https://habrastorage.org/getpro/habr/formulas/a5a/39a/0e7/a5a39a0e7f29c2d8306c490f249d3d78.svg).  

Примеры событий.  

  

1. В первом броске выпадет решка, ![$E = \{(\text{РЕШКА},\text{ОРЁЛ}), (\text{РЕШКА}, \text{РЕШКА})\}$](https://habrastorage.org/getpro/habr/formulas/bae/b7e/363/baeb7e363b6b6a5b841281575d6a63b2.svg), ![$\Pr[E] = 1/4 + 1/4 = 1/2$](https://habrastorage.org/getpro/habr/formulas/03a/a30/ee1/03aa30ee12c4cd0519634f552ff31cbc.svg).
2. Выпадет хотя бы одна решка, ![$E = \{(\text{РЕШКА},\text{ОРЁЛ}), (\text{РЕШКА}, \text{РЕШКА}),(\text{ОРЁЛ}, \text{РЕШКА})\}$](https://habrastorage.org/getpro/habr/formulas/9ff/b32/bc7/9ffb32bc760ccb326b81d226a0042acc.svg), ![$\Pr[E] = 1/4+1/4+1/4 = 3/4$](https://habrastorage.org/getpro/habr/formulas/eb7/b87/640/eb7b87640dfeb6dd7bdb7d74d23ba1a2.svg).
3. Монетка дважды выпадет одной стороной, ![$E = \{(\text{ОРЁЛ}, \text{ОРЁЛ}), (\text{РЕШКА}, \text{РЕШКА})\}$](https://habrastorage.org/getpro/habr/formulas/6d2/7ef/4fa/6d27ef4fa195753bbd4bd43589d903c3.svg), ![$\Pr[E] = 1/4 + 1/4 = 1/2$](https://habrastorage.org/getpro/habr/formulas/03a/a30/ee1/03aa30ee12c4cd0519634f552ff31cbc.svg).

  

#### Пример: выбираем случайное число из календаря 2020 года

   

Множество элементарных исходов ![$\Omega = \{1, 2,\dotsc,31\}$](https://habrastorage.org/getpro/habr/formulas/6e3/1ea/bd7/6e31eabd788b4bc5036d697f78aed1f8.svg). Как выбрать вероятности? Это зависит от того, как устроен эксперимент. Например, мы можем вырвать случайный лист отрывного календаря и посмотреть число на нем. Наиболее точной моделью, описывающей этот эксперимент, было бы вероятностное пространство с ![$366$](https://habrastorage.org/getpro/habr/formulas/690/ad8/b1e/690ad8b1e82195e90f5422ab71360d49.svg) исходами, где одинаковые числа разных месяцев различаются. И тогда вероятность того, что выпадет число 1, была бы суммой вероятностей элементарных исходов, соответствующих первым числам разных месяцев, т.е. ![$12\cdot 1/366$](https://habrastorage.org/getpro/habr/formulas/8c1/da3/eb9/8c1da3eb99911c273d1be8158dea4869.svg). Но мы можем для удобства рассмотреть более простое множество элементарных исходов ![$\Omega$](https://habrastorage.org/getpro/habr/formulas/7f9/5d3/492/7f95d3492d59cdaaf99bfd6d4d2919aa.svg) с 31 исходом, но с разными вероятностями: ![$p_1 = p_2 =\dotsb =p_{29} = 12/366$](https://habrastorage.org/getpro/habr/formulas/ff5/514/939/ff551493991357963823df5a818649bb.svg), ![$p_{30} = 11/366$](https://habrastorage.org/getpro/habr/formulas/5ea/f50/660/5eaf506608dae958ebce59ee8f6b25e4.svg), ![$p_{31} = 7/366$](https://habrastorage.org/getpro/habr/formulas/513/0e3/f4c/5130e3f4c722835829f7cd14cd2283a6.svg).  

  

Пример события: «выпавшее число месяца делится на 10». Это соответствует событию   

![$E = \{10,20,30\},\ \Pr[E] = p_{10} + p_{20} + p_{30} = (12+ 12+11)/366 = 35/366$](https://habrastorage.org/getpro/habr/formulas/733/460/139/7334601399eb50bd32f887547db3a56d.svg).  

  

#### Замечание

  

Как только мы определили вероятностное пространство (т.е. определились с множеством ![$\Omega$](https://habrastorage.org/getpro/habr/formulas/7f9/5d3/492/7f95d3492d59cdaaf99bfd6d4d2919aa.svg) и вероятностями, которые мы приписываем элементарным исходам), то вопрос о вероятности некоторого события становится чисто арифметическим. Другими словами, как только мы выбрали некоторую математическую модель, которая с нашей точки зрения описывает физический процесс, то вероятности всех событий однозначно определены.  

  

#### Задачи для самопроверки

   

В каждой задаче следует сначала описать вероятностное пространство, а уже только потом производить вычисления.  

  

1. Бросаем два игральных кубика: красный и синий. Определите вероятность того, что цифры на красном и синем кубиках совпадут.
2. В этом же эксперименте с кубиками нужно найти наиболее вероятную сумму цифр на кубиках.
3. Наудачу выбирается одно число от 1 до 20. Считая все числа равновозможными, определите вероятность того, что выбранное число:  

	* чётно;
	* делится на 3;
	* делится и на 2, и на 3;
	* не делится ни на 2, ни на 3;
	* имеет сумму цифр 9;
	* имеет сумму цифр, делящуюся на 3.

  

#### Пример вероятностного пространства, не соответствующего физическому миру

  

Рассмотрим следующий эксперимент: подбрасываем две монетки и смотрим на то, какими сторонами они выпали. Можно было бы сказать, что в данной задаче всего три исхода: две решки, два орла и орёл и решка. Если предполагать, что все исходы равновозможны, то получается, что вероятность выпадения двух орлов равна 1/3. Математика не запрещает нам рассматривать такое вероятностное пространство, но экспериментальная проверка подсказывает, что в физическом мире ответ скорее ближе к 1/4. Поэтому не стоит по умолчанию предполагать все исходы равновозможными, иначе мы получим 1/2 в ответ на вопрос о вероятности встречи динозавра.  

  

Формула суммы вероятностей
--------------------------

  

Будем называть два события *несовместными*, если их пересечение равно пустому множеству. Т.е., нет исходов, которые соответствовали бы обоим событиям. Пример: события «на игральном кубике выпало чётное число» и «на игральном кубике выпала единица или тройка» несовместны.  

  

Несовместные события обладают следующим свойством. Пусть ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg) — два несовместных события. Вероятность того, что произойдёт хотя бы одно из них, равна сумме вероятностей ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg), другими словами ![$\Pr[A\cup B] = \Pr[A] + \Pr[B]$](https://habrastorage.org/getpro/habr/formulas/a42/162/459/a42162459756aac422b3cc7e42c29fcb.svg), событие ![$A\cup B$](https://habrastorage.org/getpro/habr/formulas/547/7aa/6ec/5477aa6ec5b24d3c394654531dfb5862.svg) также называют *суммой событий ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg)* и обозначают ![$A+B$](https://habrastorage.org/getpro/habr/formulas/baa/f45/ae5/baaf45ae579bb411112ee8db10143ad5.svg). Это свойство не выполняется для произвольных событий. Например, события «на игральном кубике выпало чётное число» и «на игральном кубике выпало число больше четырёх» не несовместны и сумма их вероятностей (5/6) больше вероятности их суммы (4/6).  

  

Рассмотрим следующую задачу. В мешке лежат шарики трёх цветов: белые, жёлтые и чёрные. Причём известно, что белых ![$10\%$](https://habrastorage.org/getpro/habr/formulas/064/ae9/5cb/064ae95cb76e2488a24d39179f4b8def.svg) от общего числа, а жёлтых — ![$15\%$](https://habrastorage.org/getpro/habr/formulas/76d/336/e47/76d336e47116396880a2eca4adca0114.svg). Какова вероятность того, что случайно вытащенный шар будет светлым? Аккуратный подсчёт показывает, что если в мешке ![$N$](https://habrastorage.org/getpro/habr/formulas/1e8/0c3/b30/1e80c3b3087c0a57b68ad11261a9ec2b.svg) шаров, то рассматриваемому событию соответствует ![$0.1N + 0.15N = 0.25N$](https://habrastorage.org/getpro/habr/formulas/2ed/3aa/94a/2ed3aa94a1e979c1a83d56d9f4712c1c.svg) шаров, т.е. ![$25\%$](https://habrastorage.org/getpro/habr/formulas/5fc/5d7/0b6/5fc5d70b6ec460d4ee10de0435b3ed01.svg) от общего числа шаров. События «вытащен белый шар» и «вытащен жёлтый шар» несовместны, поэтому вероятность, что шар будет светлым равна сумме вероятностей этих событий.  

  

События называются *противоположными*, если всегда происходит ровно одно из них. Из этого определения можно заключить, что во-первых, эти события несовместны, а во-вторых, их суммарная вероятность равна 1. Событие, противоположное событию ![$E$](https://habrastorage.org/getpro/habr/formulas/d4f/55a/37f/d4f55a37fb733b176d0ef014591e1b35.svg), выражается, как ![$\Omega\setminus E$](https://habrastorage.org/getpro/habr/formulas/430/eb1/aab/430eb1aab72704862a66820cd97be538.svg) (если все элементарные исходы имеют положительную вероятность, то это единственное такое событие).  

  

#### Задача для самопроверки

   

Наудачу выбирается число ![$n$](https://habrastorage.org/getpro/habr/formulas/08d/9fa/efb/08d9faefbe272bdf8fbb80773542e343.svg) от 1 до 100. Рассмотрим следующие события:  

  

1. число ![$n$](https://habrastorage.org/getpro/habr/formulas/08d/9fa/efb/08d9faefbe272bdf8fbb80773542e343.svg) чётно;
2. число ![$n$](https://habrastorage.org/getpro/habr/formulas/08d/9fa/efb/08d9faefbe272bdf8fbb80773542e343.svg) нечётно;
3. число ![$n$](https://habrastorage.org/getpro/habr/formulas/08d/9fa/efb/08d9faefbe272bdf8fbb80773542e343.svg) делится на 4;
4. число ![$n$](https://habrastorage.org/getpro/habr/formulas/08d/9fa/efb/08d9faefbe272bdf8fbb80773542e343.svg) имеет остаток 2 при делении на 4;
5. число ![$n$](https://habrastorage.org/getpro/habr/formulas/08d/9fa/efb/08d9faefbe272bdf8fbb80773542e343.svg) имеет остаток 1 при делении на 4.

  

Какие из этих событий несовместны? (укажите все пары)  

  

Формула включений и исключений
------------------------------

  

Как определить вероятность суммы двух событий, которые не являются несовместными? Рассмотрим следующий пример. Среди учеников школы ![$15\%$](https://habrastorage.org/getpro/habr/formulas/76d/336/e47/76d336e47116396880a2eca4adca0114.svg) процентов знают французский язык и ![$20\%$](https://habrastorage.org/getpro/habr/formulas/02a/431/3fe/02a4313fe5a95e689605804097cacd84.svg) знают немецкий. Доля тех, кто владеет обоими языками всего ![$5\%$](https://habrastorage.org/getpro/habr/formulas/f67/a5b/a0f/f67a5ba0f36ae8d2ca7f45e2e38b8e4f.svg). Какова доля учеников, знающих хотя бы один из этих двух языков? Если нарисовать диаграмму, если мы сложим доли знающих французский и знающих немецкий, то мы дважды посчитаем тех, кто знает оба языка. Поэтому ответ: ![$15\% + 20\% - 5\%= 30\%$](https://habrastorage.org/getpro/habr/formulas/26e/b24/0aa/26eb240aa8b5bc9d338fb95e3b11c3fb.svg).  

![](https://habrastorage.org/r/w1560/webt/eg/wy/lz/egwylzsrd-44og37rirtfwbi6uk.png)  

Этот же вопрос можно сформулировать и на языке теории вероятностей: с какой вероятностью случайно выбранный школьник знает хотя бы один из двух языков? Аналогичное рассуждение приводит нас к следующей формуле: ![$\Pr[A\cup B] = \Pr[A] + \Pr[B] - \Pr[A\cap B],$](https://habrastorage.org/getpro/habr/formulas/c0c/8b1/bd5/c0c8b1bd5e9544aacb516e60a505d017.svg)

 где ![$A\cap B$](https://habrastorage.org/getpro/habr/formulas/0d6/405/eb9/0d6405eb9ffd9540f46c8d8af1ae934b.svg) — это пересечение событий ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg), т.е. это событие состоящее из тех элементарных исходов, которые входят одновременно и в ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg), и в ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg) (такое событие также называют *произведением событий ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg)* и обозначают ![$\Pr[AB]$](https://habrastorage.org/getpro/habr/formulas/e55/784/f23/e55784f2374dbf5e8c4e5018e0af1c73.svg)).  

  

#### Задача для самопроверки

  

Известно, что ученики класса, имеющие двойки по алгебре, составляют 25%, а ученики, имеющие двойки по геометрии, составляют 15%. Сколько учеников имеют двойки и по алгебре, и по геометрии, если ученики, не имеющие двоек ни по одному из предметов, составляют 70%?  

  

Условная вероятность
--------------------

  

Снова рассмотрим задачу про учеников и иностранные языки. Какая доля среди школьников знающих немецкий знает и французский? Ответ легко вычислить, посмотрев на картинку. Нужно вычислить отношение количества школьников знающих оба языка к количеству школьников знающих немецкий, т.е. ![$\frac{0.05N}{0.2N} = 25\%$](https://habrastorage.org/getpro/habr/formulas/3fd/265/0cd/3fd2650cd33ae1204c337b3e958fa19e.svg). Переходя к языку теории вероятностей можно задаться следующим вопросом: какова вероятность, что случайно выбранный школьник знает французский при условии, что он знает немецкий? Пусть события ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg) соответствуют тому, что случайно выбранный школьник знает французский и немецкий соответственно. Тогда искомая вероятность называется *условной вероятностью наступления ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) при условии ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg)* и обозначается ![$\Pr[A\mid B]$](https://habrastorage.org/getpro/habr/formulas/b3a/4dd/aa9/b3a4ddaa98f5b90bb1f78acb068f008e.svg). По аналогии получаем следующую формулу для условной вероятности: ![$\Pr[A\mid B] = \frac{\Pr[A\cap B]}{\Pr[B]}.$](https://habrastorage.org/getpro/habr/formulas/f5e/f8b/a91/f5ef8ba9105b5caca13d2e578dfbeae0.svg)

 Какова вероятность, что случайно выбранный школьник знает немецкий при условии, что он знает французский?  

  

Из формулы условной вероятности можно получить формулу для вероятности произведения двух событий. ![$\Pr[A\cap B] = \Pr[B] \cdot \Pr[A\mid B].$](https://habrastorage.org/getpro/habr/formulas/8fa/067/8d5/8fa0678d5ef2937eb2f00a43bce4216d.svg)

 Словами: чтобы найти вероятность того, что произойдут оба события ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg), надо умножить вероятность события ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg) на условную вероятность события ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) при известном ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg).  

  

#### Задача для самопроверки

   

В классе 50% мальчиков; среди мальчиков 60% любит мороженое. Какова доля мальчиков, любящих мороженое, среди учеников класса? Как это переформулировать на языке теории вероятностей?  

  

Независимость
-------------

  

Рассмотрим эксперимент с бросанием двух игральных кубиков: красного и синего. В этом эксперименте имеются 36 исходов, которые мы считаем равновозможными. Вероятность того, что на красном кубике выпадет тройка, равна ![$1/6$](https://habrastorage.org/getpro/habr/formulas/614/a86/63c/614a8663ca547a9716f3751d9a0394bb.svg) (6 исходов из 36), вероятность того, что на синем кубике выпадет тройка, тоже равна ![$1/6$](https://habrastorage.org/getpro/habr/formulas/614/a86/63c/614a8663ca547a9716f3751d9a0394bb.svg). Какова вероятность того, что на синем кубике выпадет тройка при условии, что на красном выпала тройка? По формуле условной вероятности нужно посчитать отношение вероятности выпадения тройки на обоих кубиках к вероятности выпадения тройки на красном. Получаем ![$\frac{1/36}{1/6} = 1/6$](https://habrastorage.org/getpro/habr/formulas/1ef/106/dc3/1ef106dc3c0be1ad629a3f2d1b91cb51.svg). Заметим, что наличие информации о том, что на красном кубике выпала тройка, никак не влияет на вероятность выпадения тройки на синем. Такие события будем называть *независимыми*. Будем говорить, что события ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg) независимы, если ![$\Pr[A\mid B] = \Pr[A].$](https://habrastorage.org/getpro/habr/formulas/cfb/4d3/a08/cfb4d3a08b395b763dbab5b2dc8964cd.svg)

 (В этом определении предполагаются, что обе вероятности событий ![$A$](https://habrastorage.org/getpro/habr/formulas/493/c1c/008/493c1c008018df9bed4910321f29ff00.svg) и ![$B$](https://habrastorage.org/getpro/habr/formulas/20d/8ca/ec6/20d8caec693d8d8eaf70885e408419f6.svg) строго больше нуля.)  

  

Альтернативное определение можно получить, если воспользоваться определением условной вероятности: два события называются *независимыми*, если вероятность их произведения равна произведению их вероятностей. ![$\Pr[AB] = \Pr[A]\cdot \Pr[B].$](https://habrastorage.org/getpro/habr/formulas/681/088/8c2/6810888c2df5af2b977b68432a23026d.svg)

  

  

#### Задачи для самопроверки

   

1. Являются ли события «знать немецкий» и «знать французский» независимыми?
2. Бросаем один игральный кубик. Являются ли независимыми события:  

	1. «выпало чётное» и «выпало нечётное»,
	2. «выпало чётное» и «выпало 2»,
	3. «выпало чётное» и «выпало кратное трём».

  

Следующий шаг — это разговор про формулу Байеса, которая выводится из определения условной вероятности. Перепишем определение:  

![$P[B\mid A] = \frac{P[A\cap B]}{P[A]}\quad \Rightarrow\quad P[A\cap B] = P[B\mid A]\cdot P[A].$](https://habrastorage.org/getpro/habr/formulas/629/d7e/f6e/629d7ef6e156ba0c944459cebca595cb.svg)

  

И подставив это в определение получаем формулу Байеса  

![$P[A\mid B] = \frac{P[A\cap B]}{P[B]} = \frac{P[B\mid A]\cdot P[A]}{P[B]},$](https://habrastorage.org/getpro/habr/formulas/280/a50/d93/280a50d935a15e21588dd200b5e69937.svg)

  

которая позволяет менять местами событие и условие под знаком вероятности. Думаю, что про применение формулы Баейса нужно писать отдельный пост, например, [такой](https://habr.com/ru/post/408775/).  

  

На этом мы закончим с определениями и перед тем, как перейти к парадоксам, давайте обсудим, а в каких случаях мы можем говорить о вероятности.  

  

Когда мы можем говорить о вероятности?
--------------------------------------

  

Предлагаю рассмотреть несколько вопросов, которые проиллюстрируют важность формулировок.  

  

**Какова вероятность того, что гуляя по улице вы встретите динозавра?**  

  

Я думаю, что всем ясно, что это не 1/2. Но всё же, как правильно ответить на этот вопрос? Проблема этого вопроса в том, что он сформулирован некорректно — из него нельзя однозначным образом определить вероятностное пространство, а следовательно и о вероятности говорить нельзя. Можно предложить какую-нибудь другую формулировку вопроса, в которой это будет очевидно. Например, начиная с завтрашнего дня на каждой улице города каждую минуту с вероятностью 0.00001 материализуется динозавр и существует в течение часа, никуда не уходя. В данной формулировке понятен случайный процесс и можно оценить вероятность встречи, если определить, как устроена прогулка, сколько длится и сколько улиц она затрагивает.  

  

![](https://habrastorage.org/webt/8b/us/pq/8buspqd994ldpovb7hpozt3srf8.gif)  

**Вы подбросили монетку и не подглядывая накрыли её рукой. Какова вероятность того, что монетка повёрнута орлом вверх?**  

  

Очень хочется сказать, что в данном случае уж точно вероятность — 1/2. Однако, строго говоря, никакого случайного процесса уже нет. Монетка уже упала какой-то стороной. От того, что вы чего-то не знаете, не значит, что это что-то случайное. Например, если вы не знаете решение уравнения — это не значит, что его решением с одинаковой вероятностью может быть любое число. Поэтому в данном случае описать вероятностное пространство не получится. Можно переформулировать вопрос, например, так: «Какова вероятность, что вы угадаете сторону монетки, если наугад равновероятно выберите орёл или решку?». В такой формулировке уже ясно, что является случайным процессом (выбор орла или решки), как определить вероятностное пространство и получить ответ 1/2. При этом, в такой формулировке уже совершенно неважно, была монетка «честной» или нет.  

  

**Замечание.** Нашу уверенность в чём-то тоже можно описывать в терминах теории вероятностей — это делается в рамках [Байесовской интерпретации теории вероятностей](https://ru.wikipedia.org/wiki/%D0%91%D0%B0%D0%B9%D0%B5%D1%81%D0%BE%D0%B2%D1%81%D0%BA%D0%B0%D1%8F_%D0%B2%D0%B5%D1%80%D0%BE%D1%8F%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C). Эта интерпретации позволяет использовать аппарат теории вероятностей для оценки нашей уверенности в истинности каких-то утверждений (не обязательно случайных) основываясь на информации, которая нам известна. Однако стоит заметить, что в этом случае понятие вероятности становится субъективным — у одного и того же события с точки зрения разных наблюдателей может быть разная вероятность. Например, в покере вы можете считать вероятность выпадения пиковой дамы положительной (так как вы не видите её на столе и в своей руке), а ваш противник, у которого в руке уже есть пиковая дама, будет оценивать вероятность её выпадения как нулевую. При этом можно придумать и такой вариант, в котором обе оценки окажутся отличными от «реальной», объктивной, вероятности. В этом нет противоречия, т.к. в это три различные величины (игроки обладают разной информацией, а объективная вероятность в данном случае соответствует полной информации).  

  

**Вы проснулись утром. Какова вероятность того, что сегодня воскресенье?**  

  

Думаю, что вы уже поняли, что ответ 1/7 — неправильный, а точнее, вопрос некорректный. Не понятно, что является случайный процессом. Для того, чтобы получить 1/7 нужно уточнить вопрос, например, так: вы засыпаете в воскресенье вечером и случайным образом просыпаетесь в любое утро на следующей неделе, какова вероятность, что вы проснётесь в воскресенье? Но даже с этим уточнением, если спросить вас о дне недели уже после того, как вы проснулись (после того, как случайный выбор был сделан), то такой вопрос останется некорректным — иначе придётся предполагать, что вы находитесь в суперпозиции всех дней недели до тех пор, пока не посмотрите на календарь.  

  

![](https://habrastorage.org/webt/qh/lq/7w/qhlq7w7nzefzduvoe1najoudsmw.gif)  

**Я написал на доске некоторое (конкретное) число и утверждаю, что дважды успешно проверил его на простоту вероятностным алгоритмом, который ошибается с вероятность менее 1%. С какой вероятностью это число простое?**  

  

Хотелось бы сказать, что это число простое с вероятностью более 99.99%. Однако, с математической точки зрения число может быть либо простым, либо нет. Поэтому так говорить некорректно. После того, как алгоритм завершил работу, ничего случайного в этой постановке задачи уже нет, следовательно нет и вероятности. Правильно было бы сказать, что вы уверены на 99.99%, что это число простое, но и это вы можете заявить только в том случае, если доверяете мне на 100% :)  

  

Парадоксы
---------

  

В этом разделе мы попробуем разобрать несколько известных «парадоксов» теории вероятностей и понять, что в них либо нет противоречий, либо вопросы поставлены некорректно.   

  

### Парадокс Монти-Холла

  

Этот очень известный [парадокс](https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D1%80%D0%B0%D0%B4%D0%BE%D0%BA%D1%81_%D0%9C%D0%BE%D0%BD%D1%82%D0%B8_%D0%A5%D0%BE%D0%BB%D0%BB%D0%B0). Об него было сломано много копий, в том числе даже именитые математики давали неправильный ответ.  


> Представьте, что вы стали участником игры, в которой вам нужно выбрать одну из трёх дверей. За одной из дверей находится автомобиль, за двумя другими дверями — козы. Вы выбираете одну из дверей, например, номер 1, после этого ведущий, который знает, где находится автомобиль, а где — козы, открывает одну из оставшихся дверей, например, номер 3, за которой находится коза. После этого он спрашивает вас — не желаете ли вы изменить свой выбор и выбрать дверь номер 2? Увеличатся ли ваши шансы выиграть автомобиль, если вы примете предложение ведущего и измените свой выбор?

  

Как подсказывает [Википедия](https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D1%80%D0%B0%D0%B4%D0%BE%D0%BA%D1%81_%D0%9C%D0%BE%D0%BD%D1%82%D0%B8_%D0%A5%D0%BE%D0%BB%D0%BB%D0%B0), для того, чтобы задача была определена корректно, нам требуется уточнить, что участнику игры заранее известны следующие правила:  

  

1. автомобиль равновероятно размещён за любой из трёх дверей;
2. ведущий знает, где находится автомобиль;
3. ведущий в любом случае обязан открыть дверь с козой (но не ту, которую выбрал игрок) и предложить игроку изменить выбор;
4. если у ведущего есть выбор, какую из двух дверей открыть, он выбирает любую из них с одинаковой вероятностью.

  

Если вы не знакомы с этим парадоксом, то я предлагаю вам несколько минут подумать о том, каким будет правильный ответ.  

  

![](https://habrastorage.org/r/w1560/webt/fi/43/gq/fi43gql0lvpogpa7sr2waf23s4o.png)  

Для того, чтобы ответить на заданный вопрос, давайте разберёмся, что тут является случайным процессом. По уточнению видно, что случайный процесс упоминается только в пунктах 1 и 4: «автомобиль равновероятно размещён за любой из трёх дверей» и «если у ведущего есть выбор, какую из двух дверей открыть, он выбирает любую из них с одинаковой вероятностью». Вопрос, на который мы должны научиться отвечать, звучит так: «Увеличатся ли ваши шансы выиграть автомобиль, если вы примете предложение ведущего и измените свой выбор». Т.е. нас спрашивают о том, какая из двух стратегий даёт большую вероятность выигрыша. Замечу, что условие номер 4 никак не влияет на факт выигрыша игрока, поэтому нет смысла включать его в вероятностное пространство. Поэтому предлагается выбрать вероятностное пространство с множеством элементарных исходов ![$\Omega = \{1,2,3\}$](https://habrastorage.org/getpro/habr/formulas/804/d95/14a/804d9514aaf00222a9295ed6ebb69407.svg), соответствующим номеру двери, за которым находится автомобиль, и вероятностями ![$p_1=p_2=p_3 = 1/3$](https://habrastorage.org/getpro/habr/formulas/c94/309/a6a/c94309a6a55979dab268bea9b431b89b.svg). Теперь рассмотрим две стратегии игрока: «оставить выбранную дверь», обозначим ![$S_1$](https://habrastorage.org/getpro/habr/formulas/e29/fc1/7ca/e29fc17ca42a00ef869e26fad569759e.svg), и «сменить дверь», обозначим ![$S_2$](https://habrastorage.org/getpro/habr/formulas/973/7f8/739/9737f8739beb74816c919ec17e0dd310.svg).   

  

Мы не знаем, как игрок делает выбор первой двери, но нам и не нужно это знать. Достаточно проверить, как работает стратегия при всех выборах первой двери. Обозначим через ![$d$](https://habrastorage.org/getpro/habr/formulas/35e/a85/36b/35ea8536b3e6152e60442ccecbc46812.svg) дверь, которую игрок выбрал изначально, а через ![$x$](https://habrastorage.org/getpro/habr/formulas/817/b92/407/817b92407f764f57af9226e50cc788fd.svg) — дверь, за которой спрятан автомобиль. Тогда для любого ![$d \in \{1,2,3\}$](https://habrastorage.org/getpro/habr/formulas/945/d3f/94d/945d3f94da18b99a2015470fc27ea319.svg) событие «игрок выиграл при использовании стратегии ![$S_1$](https://habrastorage.org/getpro/habr/formulas/e29/fc1/7ca/e29fc17ca42a00ef869e26fad569759e.svg)» соответствует тому, что он угалад правильную дверь с первой попытки. Говоря формально, нас интересует событие ![$E_1 = \{d\}$](https://habrastorage.org/getpro/habr/formulas/7a3/c41/2ab/7a3c412abc21b415ccdc1f57f9457816.svg), т.е. ![$x = d$](https://habrastorage.org/getpro/habr/formulas/56b/cd6/78f/56bcd678feab2b4dfb9fef866b8f8422.svg), и его вероятность ![$1/3$](https://habrastorage.org/getpro/habr/formulas/3bd/6e9/56e/3bd6e956e6253b375cff5b83bd347f3d.svg). Событие «игрок выиграл при использовании стратегии ![$S_2$](https://habrastorage.org/getpro/habr/formulas/973/7f8/739/9737f8739beb74816c919ec17e0dd310.svg)» соответствует противоположному событию ![$E_2 = \Omega\setminus \{d\}$](https://habrastorage.org/getpro/habr/formulas/90b/8ed/3c5/90b8ed3c5b2cba86063a71fe0238e0ae.svg), т.е. ![$x \neq d$](https://habrastorage.org/getpro/habr/formulas/093/1de/291/0931de29192b48bd94caca8a6ea10942.svg), и его вероятность ![$2/3$](https://habrastorage.org/getpro/habr/formulas/624/730/48b/62473048bc3e141b62d6dbb5a6f7d7a3.svg). Осталось ещё раз отметить, что, если этот анализ верен для любого выбора ![$d$](https://habrastorage.org/getpro/habr/formulas/35e/a85/36b/35ea8536b3e6152e60442ccecbc46812.svg), поэтому верен и при любой стратегии выбора первой двери. Кроме того, заметим, что мы никак не использовали условие 4.  

  

Как видите, никаких неоднозначностей тут нет, парадоксом эта задача называется только потому, что ответ может не соответствовать интуиции. Но так в математике случается довольно часто.  

  

### Парадокс мальчика и девочки

  

Цитирую [Википедию](https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D1%80%D0%B0%D0%B4%D0%BE%D0%BA%D1%81_%D0%BC%D0%B0%D0%BB%D1%8C%D1%87%D0%B8%D0%BA%D0%B0_%D0%B8_%D0%B4%D0%B5%D0%B2%D0%BE%D1%87%D0%BA%D0%B8).  


> Впервые задача была сформулирована в 1959 году, когда Мартин Гарднер опубликовал один из самых ранних вариантов этого парадокса в журнале Scientific American под названием «The Two Children Problem», где привёл следующую формулировку:   
> 
>   
> 
> * У мистера Джонса двое детей. Старший ребёнок — девочка. Какова вероятность того, что оба ребёнка — девочки?
> * У мистера Смита двое детей. Хотя бы один ребёнок — мальчик. Какова вероятность того, что оба ребёнка — мальчики?
> 
>   
> 
> Сам Гарднер изначально давал ответ ![$1/2$](https://habrastorage.org/getpro/habr/formulas/e1b/aa1/a83/e1baa1a833fd3daad3d6996bc433c501.svg) и ![$1/3$](https://habrastorage.org/getpro/habr/formulas/3bd/6e9/56e/3bd6e956e6253b375cff5b83bd347f3d.svg) соответственно, но впоследствии понял, что ситуация во втором случае неоднозначна. Ответом на второй вопрос может быть и ![$1/2$](https://habrastorage.org/getpro/habr/formulas/e1b/aa1/a83/e1baa1a833fd3daad3d6996bc433c501.svg) в зависимости от того, как было выяснено, что один из детей — мальчик.

  

Вероятностное пространоство задано ![$\Omega = \{\text{ММ},\text{МД},\text{ДМ},\text{ДД}\}$](https://habrastorage.org/getpro/habr/formulas/b59/4cf/b2a/b594cfb2a9f8f9b3ff6ff35825b20ae6.svg) и все вероятности равны ![$1/4$](https://habrastorage.org/getpro/habr/formulas/f03/310/660/f033106603789eaa1ac95a45c39c8422.svg). В первом случае нам известно, что выполнено событие ![$E = \{\text{ДМ},\text{ДД}\}$](https://habrastorage.org/getpro/habr/formulas/7e0/3cd/cfb/7e03cdcfb2e85f38fb245a9334208350.svg). Поэтому при условии ![$E$](https://habrastorage.org/getpro/habr/formulas/d4f/55a/37f/d4f55a37fb733b176d0ef014591e1b35.svg) вероятность двух девочек равна 1/2.  

  

Во втором случае всё сложнее, т.к. не понятно, как мы узнали, что у мистера Смита один из детей мальчик. Можно предположить два варианта:  

  

1. Выбирается случайный человек с двумя детьми и его спрашивают, есть ли среди его детей мальчик. Тогда вероятность двух мальчиков получится 1/3, т.к. это соответствует вероятности ММ при условии события ![$E = \{\text{ММ},\text{МД},\text{ДМ}\}$](https://habrastorage.org/getpro/habr/formulas/08c/7af/b4c/08c7afb4c27b6b6f981086f774b23284.svg).
2. Выбирается случайный человек с двумя детьми, выбирается случайный его ребёнок (старший или младший) и спрашивается его пол. Этот эксперимент соответствует другому вероятностному пространству, в котором нужно ещё учесть выбор того ребёнка, про которого спрашивают. В нём будет 8 элементарных исходов, и нам подойдут четыре из них (ММ и спросили про старшего, ММ и спросили про младшего, МД и спросили про старшего, ДМ и спросили про младшего). Нам подходят два исхода, поэтому ответом будет 1/2.

  

### Парадокс Спящей Красавицы

  

Обсуждение этого парадокса мотивировано вот [этим постом на хабре](https://habr.com/ru/post/446716/), который вызвал широкое обсуждение, но описание этого парадокса есть и в [википедии](https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D1%80%D0%B0%D0%B4%D0%BE%D0%BA%D1%81_%D1%81%D0%BF%D1%8F%D1%89%D0%B5%D0%B9_%D0%BA%D1%80%D0%B0%D1%81%D0%B0%D0%B2%D0%B8%D1%86%D1%8B).  


> Испытуемой («Спящей Красавице») делается укол снотворного. Бросается симметричная монетка. В случае выпадения орла её будят, и эксперимент на этом заканчивается. В случае выпадения решки её будят, делают второй укол (после чего она забывает о побудке) и будят на следующий день, не бросая монеты (в таком случае эксперимент идёт два дня подряд). Вся эта процедура Красавице известна, однако у неё нет информации, в какой день её разбудили.  
> 
>   
> 
> Представьте себя на месте Спящей Красавицы. Вас разбудили. Какова вероятность того, что монетка упала решкой?

  

Предлагается рассмотреть два альтернативных решения с разными результатами.  

  

![](https://habrastorage.org/webt/fa/cj/qp/facjqpiebuf1prb4zydexnbxndk.gif)  

#### Решение 1

  

 У вас нет никакой информации о результате выпадения монеты и предыдущих побудках. Поскольку известно, что монетка честная, можно предположить, что вероятность выпадения решки равна ![$1/2$](https://habrastorage.org/getpro/habr/formulas/e1b/aa1/a83/e1baa1a833fd3daad3d6996bc433c501.svg).  

  

#### Решение 2

   

 Проведём эксперимент 1000 раз. Спящую Красавицу будят в среднем 500 раз с орлом и 1000 раз с решкой (т.к. при выпадении решки Спящую Красавицу спрашивают 2 раза). Поэтому вероятность выпадения решки равна ![$2/3$](https://habrastorage.org/getpro/habr/formulas/624/730/48b/62473048bc3e141b62d6dbb5a6f7d7a3.svg).  

  

Кажется, что оба решения могут претендовать на звание правильного. Однако, при попытке определить вероятностное пространство нас ожидают серьёзные трудности. Что же является случайным процессом? Дело в том, что когда Спящая Красавица просыпается, никакого случайного процесса уже нет. Выбор уже сделан. Ей не известен результат этого выбора, но ничего случайного уже нет. Это возвращает нас к примеру с динозавром. Если вы не знаете, есть ли за углом динозавр, то это не значит, что он там есть с вероятностью 1/2. Поэтому «Решение 1» отвечает не на вопрос про вероятность, а на вопрос про степень уверенности Спящей Красавицы. А «Решение 2» предлагает рассмотреть совершенно другой эксперимент, в котором задаётся в общем-то совершенно другой вопрос, на который предлагается ответить внешнему наблюдателю до начала эксперимента.   

  

Для того, чтобы придать этому вопросу математический смысл и получить желаемый ответ 2/3, придётся воспользоваться каким-нибудь философским приёмом, вроде «подселения душ». Например, так: вы заходите в аппарат переселения душ, после этого подбрасывается монетка для Спящей Красавицы, которая создаёт две параллельные вселенные: одну, где монетка выпала орлом, и другую, где выпала решкой. Суммарно в пространстве-времени этих двух альтернативных вселенных есть три различных пробуждения Спящей Красавицы. Аппарат по переселению душ с вероятностью 1/3 подселяет вашу душу в тело Спящей Красавицы незадолго до одного из этих пробуждений. Какова вероятность, что вы проснетесь в параллельной вселенной, где выпала решка?  

  

Как видите, для придания математического смысла этому вопросу, придётся хорошенько пофантазировать, но этим занимаются не математики, а философы (подробнее в этом [посте](https://habr.com/ru/post/446716/)). Утверждать, что «оба решения правильные», некорректно с математической точки зрения.  

  

### Задача для самопроверки

  

Объясните, почему в задаче о детях моряка, с которой начинается [этот пост](https://habr.com/ru/post/446716/), вопрос поставлен некорректно (т.е. ни 1/2, ни 1/3 не являются правильным ответом).  

  

Бесконечный случай
------------------

  

Когда мы переходим к бесконечному случаю, т.е. рассматриваем эксперименты с бесконечным числом элементарных исходов, то всё становится значительно сложнее. Я не буду вдаваться в детали и даже не буду определять вероятностное пространство для бесконечного случая, т.к. это требует более сложной математики. Однако, для иллюстрации отмечу, что в бесконечном случае могут быть такие (плохие) множества элементарных исходов, которые не имеют вероятности (неизмеримые множества). При этом для всех хороших (измеримых) событий вероятность определена однозначно. Поэтому и те «парадоксы», которые возникают в бесконечном случае, тоже возникают из-за неоднозначности выбора вероятностного пространства. Хорошим наглядным примером служит [парадокс Бертрана](https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D1%80%D0%B0%D0%B4%D0%BE%D0%BA%D1%81_%D0%91%D0%B5%D1%80%D1%82%D1%80%D0%B0%D0%BD%D0%B0_(%D0%B2%D0%B5%D1%80%D0%BE%D1%8F%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C)), показывающий, как казалось бы эквивалентные (на самом деле нет) вероятностные пространства приводят к разным результатам.  

  

Вместо заключения
-----------------

  

Даже если вы не собираетесь никуда поступать или проходить собеседования на технические позиции в IT-компании, то вы всё равно можете захотеть освежить знания по математике, которые могут пригодиться в программировании. Могу посоветовать [онлайн-курс СS центра по теории вероятностей](https://stepik.org/course/3089/promo), который читает А.И. Храбров.  

  

![](https://habrastorage.org/r/w1560/webt/k-/y7/ja/k-y7jaawvtme0mu3s4y-7m_jb6e.png)  

БОНУС
-----

  

Приглашаю всех послушать лекция Александра Шеня [«Генераторы «случайных чисел»: теория и практика»](https://compsciclub.ru/courses/csseminar/2020-spring/classes/5758/) в это воскресенье 26 апреля в 14:00 в [Computer Science клубе](https://compsciclub.ru/). Лекция будет читаться в zoom-е, для участия нужно записаться на [курс](https://compsciclub.ru/courses/csseminar/2020-spring/) или подписаться на рассылку.  

  

![](https://habrastorage.org/r/w780q1/webt/xt/90/vu/xt90vu-en5rjkj_kttxugyu8btu.jpeg)