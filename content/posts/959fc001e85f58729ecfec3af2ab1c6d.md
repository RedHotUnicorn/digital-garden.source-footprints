---
title: 'Transcription and diarization (speaker identification) · openai/whisper ·
  Discussion #264 · GitHub'
date: 2024-01-22
src_link: https://www.notion.so/Transcription-and-diarization-speaker-identification-openai-whisper-Discussion-264-f4c1b25465ad462a99c0ad5a11e849b6
src_date: '2024-01-22 09:10:00'
gold_link: https://github.com/openai/whisper/discussions/264
gold_link_hash: 959fc001e85f58729ecfec3af2ab1c6d
tags:
- '#host_github_com'
---

 Whisper's transcription plus Pyannote's Diarization **Update** - [@johnwyles](https://github.com/johnwyles) added HTML output for audio/video files from Google Drive, along with some fixes. Using the new word-level timestamping of Whisper, the transcription words are highlighted as the video plays, with optional autoscroll. And the display on small displays is improved. Moreover, the model is loaded just once, thus the whole thing runs much faster now. You can also hardcode your Huggingface token.   ---   Andrej Karpathy [suggested](https://twitter.com/karpathy/status/1574476200801538048?s=20&t=s5IMMXOYjBI6-91dib6w8g) training a classifier on top of [**openai/whisper**](https://github.com/openai/whisper) model features to identify the speaker, so we can visualize the speaker in the transcript. But, as [pointed out](https://twitter.com/tarantulae/status/1574493613362388992?s=20&t=s5IMMXOYjBI6-91dib6w8g) by Christian Perone, it seems that features from whisper wouldn't be that great for speaker recognition as its main objective is basically to ignore speaker differences. In [**`Majdoddin/nlp`**](https://github.com/Majdoddin/nlp), I use [**`pyannote-audio`**](https://github.com/pyannote/pyannote-audio), a speaker diarization toolkit by Hervé Bredin, to identify the speakers, and then match it with the transcriptions of Whispr. Check the result [**here**](https://majdoddin.github.io/dyson.html). **Edit:** To make it easier to match the transcriptions to diarizations by speaker change, Sarah Kaiser [suggested](https://github.com/openai/whisper/discussions/264#discussioncomment-3825375) runnnig the pyannote.audio first and then just running whisper on the split-by-speaker chunks.  For sake of performance (and transcription quality?), we attach the audio segements into a single audio file with a silent spacer as a seperator, and run whisper on it. Enjoy it!(For sake of performance , I also tried attaching the audio segements into a single audio file with a silent -or beep- spacer as a seperator, and run whisper on it see it on [colab](https://colab.research.google.com/drive/1HuvcY4tkTHPDzcwyVH77LCh_m8tP-Qet?usp=sharing). It [works](https://majdoddin.github.io/lexicap.html) on some audio, and fails on some -e.g. Dyson's Interview. The problem is, whisper does not reliably make a timestap on a spacer. See the discussions [#139](https://github.com/openai/whisper/discussions/139) and [#29](https://github.com/openai/whisper/discussions/29)) |